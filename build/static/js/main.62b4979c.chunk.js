(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{211:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(29),o=n.n(c),i=n(55),s=n(20),u=n(13),l=n(239),b=n(240),d=n(229),j=3e3,p={notLoggedIn:{description:"You need to be logged in to add notes",status:"error",duration:j,isClosable:!0},noteTooShort:function(e){return{description:"Note needs to be at least ".concat(e," characters long"),status:"error",duration:j,isClosable:!0}},failedGet:{description:"Failed to get notes, please check your network",status:"error",duration:j,isClosable:!0},failedCreate:{description:"Failed to create note",status:"error",duration:j,isClosable:!0}},f=n(2),O=n(7),h=n.n(O),v=n(14),g=n(12),m=n(31),x=n.n(m),w=function(e){if(k(e))return{username:e.username,password:e.password};throw new Error("Invalid username or password")},y=function(e){return!(!e||"object"!==typeof e)&&("token"in e&&"username"in e&&"name"in e)},k=function(e){return!!(e&&"object"===typeof e&&"username"in e&&"password"in e)},S=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("logging in"),e.next=4,x.a.post("/api/login",Object(f.a)({},t));case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(null===(a=e.t0.response)||void 0===a?void 0:a.data.error);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),F={login:S},C=function(){var e=E();return e?{headers:{authorization:e.token}}:null},E=function(){var e=window.localStorage.getItem("tokenData");return e?function(e){if(!e||!y(e))throw new Error("Invalid or missing token");return e}(JSON.parse(e)):null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=window.localStorage;switch(n){case"login/init":return y(r)?Object(f.a)({},r):Object(f.a)({},e);case"login/storeToken":return y(r)?(a.setItem("tokenData",JSON.stringify(r)),Object(f.a)({},r)):(console.error("Missing or invalid token after login, cannot set to localStorage"),Object(f.a)({},e));case"login/logout":return a.removeItem("tokenData"),{};default:return Object(f.a)({},e)}},I="/api/notes",_="POSITION",A="CONTENT",V=function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=I,e.t0=n,e.next=e.t0===_?4:e.t0===A?6:8;break;case 4:return r+="/position",e.abrupt("break",10);case 6:return r+="/content",e.abrupt("break",10);case 8:return a=n,e.abrupt("return",a);case 10:return e.next=12,x.a.put(r,t);case 12:return c=e.sent,e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(v.a)(h.a.mark((function e(){var t,n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=E())){e.next=10;break}return n={headers:{authorization:t.token}},e.next=5,x.a.get(I,n);case 5:return r=e.sent,a=r.data,e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E(),e.prev=1,!n){e.next=11;break}return r={note:t,token:n.token},e.next=6,x.a.post(I,r);case 6:return a=e.sent,c=a.data,e.abrupt("return",c);case 11:throw new Error("Failed to add note, user currently not logged in");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(1),new Error(null===(o=e.t0.response)||void 0===o?void 0:o.data);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=E())){e.next=9;break}return a=r.token,e.next=5,x.a.delete("".concat(I,"/").concat(t),{data:{token:a,toUpdate:n}});case 5:return c=e.sent,e.abrupt("return",c);case 9:throw new Error("Failed to delete note, user currently not logged in");case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P={getAll:z,addNew:D,remove:L,update:V},T=function(e){return"string"===typeof e||e instanceof String},R=function(e){return!(!e&&"string"!==typeof e)&&!!T(e)},J=R,U=function(e){return!!e&&(!!J(e._id)&&!!function(e){return!!e&&!!J(e.content)&&!(!J(e.created)||!M(e.created))&&!!J(e.position)}(e))},B=function(e){return!!e&&(!!J(e.match)&&U(e.note))},G=function(e){return Array.isArray(e)&&e.every(U)},M=function(e){return Boolean(Date.parse(e))},H=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a={_id:r._id,position:r.position};t.push(a)}return t},W=n(57),q=function(e){return JSON.stringify(Number(e)+1)},Y=function(e,t,n){return e>=t&&e<=n},K=function(e,t){return e.filter((function(e){return e._id!==t}))},Z=function(e,t,n){var r,a=[];if(n>t)for(var c=0;c<e.length;c++){var o=e[c];Y(Number(o.position),t+1,n)&&(o.position=(r=o.position,JSON.stringify(Number(r)-1)),a.push(o))}else if(n<t)for(var i=0;i<e.length;i++){var s=e[i];Y(Number(s.position),n,t-1)&&(s.position=q(s.position),a.push(s))}return e[n].position=JSON.stringify(n),a.push(e[n]),{updated:e,changedNotes:a}},Q=function(e,t,n){return Object(g.a)(Object(W.b)(e,t,n))},X=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=H(t),e.next=3,P.update(n,_);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r];Number(a.position)>Number(t)&&(a.position=JSON.stringify(Number(a.position)-1),n.push(a))}return{updated:e,changedNotes:n}},ee=function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAll();case 2:n=e.sent,t({type:"notes/initialize",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"notes/initialize":return G(r)?Object(g.a)(r):Object(g.a)(e);case"notes/remove":if(J(r)){var a=r,c=K(e,a);return c}return console.error("Failed deletion of note state"),Object(g.a)(e);case"notes/create":return U(r)?[].concat(Object(g.a)(e),[r]):(console.error("Failed adding created note to state"),Object(g.a)(e));case"notes/updateOne":if(B(r)){var o=Object(g.a)(e),i=o.findIndex((function(e){return e._id===r.match}));return o[i]=r.note,o}return console.error("Payload in notes/updateOne reducer is not an UpdatePayload"),Object(g.a)(e);case"notes/updateArray":return G(r)?Object(g.a)(r):(console.error("Failed to update notes in notes reducer"),Object(g.a)(e));case"notes/clear":return[];default:return Object(g.a)(e)}},ne=n(228),re=n(3),ae=function(){return Object(re.jsxs)(ne.a,Object(f.a)(Object(f.a)({},{separator:"-",fontWeight:"medium",fontSize:"25px",fontFamily:"flexa"}),{},{children:[Object(re.jsx)(ne.b,{children:Object(re.jsx)(ne.c,{as:i.b,to:"/",d:"inline",children:"Home"})}),Object(re.jsx)(ne.b,{children:Object(re.jsx)(ne.c,{as:i.b,to:"/notes",d:"inline",children:"Notes"})}),Object(re.jsx)(ne.b,{children:Object(re.jsx)(ne.c,{as:i.b,to:"/pad",d:"inline",children:"Pad"})}),Object(re.jsx)(ne.b,{children:Object(re.jsx)(ne.c,{as:i.b,to:"/user",d:"inline",children:"User"})}),Object(re.jsx)(ne.b,{children:Object(re.jsx)(ne.c,{as:i.b,to:"/about",d:"inline",children:"About"})})]}))},ce=function(){return Object(re.jsxs)(d.a,Object(f.a)(Object(f.a)({},{fontFamily:'"Lato",  sans serif',fontSize:"16px"}),{},{children:[Object(re.jsx)("h3",{children:Object(re.jsx)("i",{children:"Notes app, by Chiew Weng Keat"})}),Object(re.jsxs)("p",{children:["\u2003 total notes stored: ",Object(re.jsx)("br",{}),"\u2003 total users:"]})]}))},oe=n(21),ie=n(93),se=n(234),ue=n(241),le=function(e){for(var t=e.rows,n={height:"26px",width:"500px",alignSelf:"center"},r=[],c=0;c<t;c++)r.push(Object(re.jsxs)(a.a.Fragment,{children:[Object(re.jsx)(ue.a,{style:n}),Object(re.jsx)(ue.b,{visibility:"hidden"}),Object(re.jsx)(ue.b,{visibility:"hidden"})]},c));return Object(re.jsx)(re.Fragment,{children:r})},be=n(6),de=n(123),je=n(232),pe=n(124),fe=n(233),Oe=n(23),he=n(230),ve=n(113),ge="noteActionViews/editing",me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isEditing:!1,noteId:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"".concat(ge,"/set"):return T(r)?Object(f.a)(Object(f.a)({},e),{},{isEditing:!0,noteId:r}):(console.log("Invalid noteId: ".concat(JSON.stringify(r))),Object(f.a)({},e));case"".concat(ge,"/reset"):return Object(f.a)(Object(f.a)({},e),{},{isEditing:!1,noteId:null});default:return Object(f.a)({},e)}},xe=Object(Oe.a)(ve.a),we=function(e){var t=e.handleEdit,n={bgColor:e.isEditing?"gray.400":"transparent",borderRadius:"full",size:"sm",_hover:{bgColor:"gray.400"},title:"edit"};return Object(re.jsx)(he.a,Object(f.a)(Object(f.a)({},n),{},{"aria-label":"edit note",icon:Object(re.jsx)(xe,{}),onClick:t}))},ye=function(e){var t=e.note,n=e.isEditing,r=Object(u.b)();return Object(re.jsx)(we,{isEditing:n,handleEdit:function(e){var n;e.preventDefault(),r((n=t._id,function(e){e({type:"".concat(ge,"/set"),payload:n})}))}})},ke=n(242),Se=function(e){var t=e.handleDelete,n=e.toggleHighlight;return Object(re.jsx)(he.a,Object(f.a)(Object(f.a)({},{color:"black",borderRadius:"full",bgColor:"transparent",size:"sm",_hover:{color:"white",bgColor:"red.900"},title:"delete"}),{},{"aria-label":"delete",icon:Object(re.jsx)(ke.a,{}),onClick:t,onMouseOver:n,onMouseOut:n,children:"delete"}))},Fe=function(e){var t=e.note,n=Object(u.b)();return Object(re.jsx)(Se,{handleDelete:function(e){e.preventDefault(),n(function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n,r){var a,c,o,i,s,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(g.a)(r().notes),c=e.position,o=$(a,c),i=o.updated,s=o.changedNotes,u=H(s),n({type:"notes/updateArray",payload:i}),n({type:"notes/remove",payload:e._id}),t.next=9,P.remove(e._id,u);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("Error deleting note: ".concat(t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))},toggleHighlight:function(){var e=document.getElementById(t._id);if(e)switch(e.style.color){case"red":e.style.color="";break;case"":e.style.color="red"}}})},Ce=n(114),Ee=function(e){var t=e.note,n=Object(u.b)(),a=Object(r.useState)(t.content),c=Object(be.a)(a,2),o=c[0],i=c[1],s=Object(r.useRef)(null);Object(r.useEffect)((function(){i(t.content)}),[t.content]);var l=function(e){if(e.preventDefault(),n((function(e){e({type:"".concat(ge,"/reset")})})),o!==t.content){var r=Object(f.a)(Object(f.a)({},t),{},{content:o});n(function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"notes/updateOne",payload:{match:e._id,note:e}}),t.prev=1,t.next=4,P.update(e,A);case 4:return r=t.sent,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(1),console.error("Error deleting note: ".concat(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(r))}};return Object(re.jsxs)(de.a,{as:"form",onSubmit:l,children:[Object(re.jsx)(je.a,{ref:s,as:"textarea",id:t._id,style:{height:"32px",padding:"0px",verticalAlign:"top",overflow:"hidden"},autoFocus:!0,autoComplete:"off",value:o,rows:1,spellCheck:!1,onChange:function(e){return i(e.currentTarget.value)},onBlur:l}),Object(re.jsx)(pe.a,{style:{display:"none"}})]})},Ne=function(e){var t=e.note,n=Object(W.c)({id:t.position}),c=n.setNodeRef,o=n.attributes,i=n.listeners,s=n.transition,l=n.transform,b={transition:s,transform:l?"translate3d(".concat(null===l||void 0===l?void 0:l.x,"px, ").concat(null===l||void 0===l?void 0:l.y,"px, 0)"):void 0},j=Object(u.c)((function(e){return e.noteActionViews})),p=j.isEditing&&j.noteId===t._id,O=Object(re.jsx)(d.a,Object(f.a)(Object(f.a)(Object(f.a)({id:t._id,ref:c},o),i),{},{style:b,children:t.content})),h=p?Object(re.jsx)(Ee,{note:t}):O;return Object(r.useEffect)((function(){p&&Object(Ce.a)(document.querySelector("textarea"))}),[p]),Object(re.jsxs)(a.a.Fragment,{children:[h,Object(re.jsx)(fe.a,{children:Object(re.jsx)(ye,{note:t,isEditing:p})}),Object(re.jsx)(fe.a,{children:Object(re.jsx)(Fe,{note:t})})]},t._id)},Ie=function(){var e=Object(u.c)((function(e){return e.notes})),t=Object(u.b)(),n=E()&&0===e.length?Object(re.jsx)(le,{rows:5}):e.map((function(e){return Object(re.jsx)(Ne,{note:e},e.position)}));return Object(re.jsx)(se.a,Object(f.a)(Object(f.a)(Object(f.a)({},{mt:"1",templateColumns:"minmax(auto, 600px) 30px 30px",autoRows:"min-max(32px, max-content)",rowGap:"5px"}),{fontFamily:'"Lato",  sans serif',fontSize:"16px"}),{},{children:Object(re.jsx)(oe.a,{onDragEnd:function(n){var r=n.active,a=n.over;if(r&&a){var c=e.findIndex((function(e){return e.position===r.id})),o=e.findIndex((function(e){return e.position===a.id}));c!==o&&t(function(e,t){return function(){var n=Object(v.a)(h.a.mark((function n(r,a){var c,o,i,s,u;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a().notes,o=Q(c,e,t),i=Z(o,e,t),s=i.updated,u=i.changedNotes,r({type:"notes/updateArray",payload:s}),n.next=6,X(u);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(c,o))}},modifiers:[ie.b,ie.a],collisionDetection:oe.c,children:Object(re.jsx)(W.a,{items:e.map((function(e){return e.position})),strategy:W.d,children:n})})}))},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(r.useState)(t),a=Object(be.a)(n,2),c=a[0],o=a[1],i=function(e){return o(e.currentTarget.value)},s=function(){return o("")};return{type:e,value:c,onChange:i,clearField:s}},Ae=n(235),Ve=Object(r.forwardRef)((function(e,t){var n=e.onSubmit,r=e.noteInput;return Object(re.jsxs)(de.a,{as:"form",onSubmit:n,children:[Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)({ref:t},{placeholder:"new note...",size:"sm",w:350,variant:"filled",borderRadius:"2xl",m:1.5,ml:-.5,colorScheme:"facebook",autoComplete:"off"}),r)),Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},{size:"xs",bgColor:"black",color:"white",colorScheme:"twitter",_hover:{bgColor:"gray.600"},title:"save new note"}),{},{children:"save"}))]})})),ze=function(){var e=_e("text"),t=Object(u.b)(),n=Object(l.a)(),a=Object(r.useRef)(null);return document.addEventListener("keyup",(function(e){var t;"Slash"===e.code&&a.current&&!(null===(t=document.activeElement)||void 0===t?void 0:t.id)&&a.current.focus()})),Object(re.jsx)(Ve,{ref:a,onSubmit:function(r){r.preventDefault();var a;if(e.value.length<4)n(p.noteTooShort(4));else if(Boolean(E()))try{t((a=e.value,function(){var e=Object(v.a)(h.a.mark((function e(t,n){var r,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().notes.at(-1),c={content:a,created:(new Date).toString(),position:r?JSON.stringify(Number(r.position)+1):"0"},o=JSON.stringify(Math.round(1e8*Math.random())),e.prev=3,t({type:"notes/create",payload:Object(f.a)(Object(f.a)({},c),{},{_id:o})}),e.next=7,P.addNew(c);case 7:i=e.sent,t({type:"notes/remove",payload:o}),t({type:"notes/create",payload:i}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error("Error adding note: ".concat(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}())),e.clearField()}catch(r){console.error(r.message),n(p.failedCreate)}else n(p.notLoggedIn)},noteInput:e})},De=n(122),Le=(n(169),n(171),n(173),n(175),n(177),n(179),n(181),n(183),n(185),n(187),n(189),n(191),n(193),n(195),n(197),n(199),n(201),n(203),n(205),n(207),n(208),n(209),function(e){var t=e;return"_id"in t&&"string"===typeof t._id&&"content"in t&&"string"===typeof t.content&&"user"in t&&"string"===typeof t.user}),Pe=function(e){if(!Le(e))throw new Error("Value from backend is not a valid Pad object");return e},Te="/api/pad",Re={get:function(){var e=Object(v.a)(h.a.mark((function e(){var t,n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=C())){e.next=10;break}return e.next=5,x.a.get(Te,t);case 5:return n=e.sent,r=n.data,e.abrupt("return",Pe(r));case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error(null===(a=e.t0.response)||void 0===a?void 0:a.data);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),update:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=C())){e.next=10;break}return e.next=5,x.a.put(Te,{content:t},n);case 5:return r=e.sent,a=r.data,e.abrupt("return",a);case 10:return e.abrupt("return",null);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error(null===(c=e.t0.response)||void 0===c?void 0:c.data);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},Je=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue={error:{description:"Failed to retrieve Pad contents",status:"error",duration:3e3,isClosable:!0}},Be=function(){var e=Object(u.c)((function(e){return e.login})),t=Object(l.a)();Object(r.useEffect)((function(){var n;0!==Object.keys(e).length?new Promise((function(e){e(Je())})).then((function(e){var t;Le(e)&&(null===(t=a.current)||void 0===t||t.setContent(e.content))})).catch((function(e){console.error("Failed to retrieve pad content: ".concat(e.message)),t(Ue.error)})):null===(n=a.current)||void 0===n||n.setContent("")}),[e]);var n=function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=4;break}return t=a.current.getContent(),e.next=4,Re.update(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=Object(r.useRef)(null);return Object(re.jsx)("div",Object(f.a)(Object(f.a)({},{display:"flex",flexDirection:"column",mt:2}),{},{children:Object(re.jsx)(De.a,{onInit:function(e,t){a.current=t},init:{skin:!1,height:500,menubar:!1,plugins:["advlist autolink lists link image","charmap print preview anchor help","searchreplace visualblocks code","insertdatetime media table save"],statusbar:!1,toolbar:"undo redo | bold italic |                        underline strikethrough | superscript subscript charmap code |                        alignleft aligncenter alignright alignjustify |                        bullist numlist outdent indent | blockquote |                        link image media table | forecolor backcolor |                        removeformat fontsizeselect | fontselect | save | help",toolbar_mode:"wrap",contextmenu:!1,content_css:"./pad.css",width:1600,branding:!1,image_caption:!1,max_height:1800,min_height:880,forced_root_block:"p",save_onsavecallback:n},onChange:function(){var e;console.log("Content was updated: ".concat(null===(e=a.current)||void 0===e?void 0:e.getContent()))}})}))},Ge="userFormViews/loginForm",Me="userFormViews/signupForm",He=function(){return function(e){e({type:"".concat(Ge,"/toggle")})}},We=function(){return function(e){e({type:"".concat(Ge,"/spinner/hide")})}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loginForm:!1,loginSpinner:!1,signupForm:!1,signupSpinner:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case"".concat(Ge,"/toggle"):return Object(f.a)(Object(f.a)({},e),{},{signupForm:!1,loginForm:!e.loginForm});case"".concat(Ge,"/show"):return Object(f.a)(Object(f.a)({},e),{},{signupForm:!1,loginForm:!0});case"".concat(Ge,"/hide"):return Object(f.a)(Object(f.a)({},e),{},{loginForm:!1});case"".concat(Ge,"/spinner/show"):return Object(f.a)(Object(f.a)({},e),{},{loginSpinner:!0});case"".concat(Ge,"/spinner/hide"):return Object(f.a)(Object(f.a)({},e),{},{loginSpinner:!1});case"".concat(Me,"/toggle"):return Object(f.a)(Object(f.a)({},e),{},{loginForm:!1,signupForm:!e.signupForm});case"".concat(Me,"/show"):return Object(f.a)(Object(f.a)({},e),{},{loginForm:!1,signupForm:!0});case"".concat(Me,"/hide"):return Object(f.a)(Object(f.a)({},e),{},{signupForm:!1});case"".concat(Me,"/spinner/show"):return Object(f.a)(Object(f.a)({},e),{},{signupSpinner:!0});case"".concat(Me,"/spinner/hide"):return Object(f.a)(Object(f.a)({},e),{},{signupSpinner:!1});default:return Object(f.a)({},e)}},Ye=3e3,Ke={failed:{description:"Login failed. Please try again",status:"error",duration:Ye,isClosable:!0},success:function(e){return{description:"logged in as ".concat(e),status:"success",duration:Ye,isClosable:!0}},error:function(e){return{description:"".concat(e),status:"error",duration:Ye,isClosable:!0}}},Ze={success:function(e){return{description:"".concat(e," logged out"),status:"success",duration:Ye,isClosable:!0}},failed:function(e){return{description:"Error logging out: ".concat(e),status:"error",duration:Ye,isClosable:!0}}},Qe=n(244),Xe=n(236),$e=n(237),et=n(243),tt=n(59),nt=function(e){var t=e.handleLogin,n=e.username,r=e.password,a=e.showSpinner,c={size:"sm",w:200,variant:"filled",borderRadius:"xl"},o=Object(Oe.a)(tt.c),i=Object(Oe.a)(tt.b);return Object(re.jsx)(de.a,{as:"form",onSubmit:t,children:Object(re.jsxs)(Qe.a,{spacing:.5,children:[Object(re.jsxs)(Xe.a,Object(f.a)(Object(f.a)({},c),{},{children:[Object(re.jsx)($e.a,{pointerEvents:"none",children:Object(re.jsx)(o,{})}),Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},n),c),{},{placeholder:"username"}))," ",Object(re.jsx)("br",{})]})),Object(re.jsxs)(Xe.a,Object(f.a)(Object(f.a)({},c),{},{children:[Object(re.jsx)($e.a,{pointerEvents:"none",children:Object(re.jsx)(i,{})}),Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},r),c),{},{placeholder:"password"}))]})),Object(re.jsxs)(d.a,{children:[Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},{size:"xs",bgColor:"blue.300",display:"inline"}),{},{children:"login"})),Object(re.jsx)(rt,{isVisible:a})]})]})})},rt=function(e){return e.isVisible?Object(re.jsx)(et.a,Object(f.a)({},{size:"sm",verticalAlign:"middle",margin:"7px"})):null},at=function(){var e=Object(u.b)(),t=Object(l.a)(),n=Object(u.c)((function(e){return e.userFormViews.loginForm})),r=Object(u.c)((function(e){return e.userFormViews.loginSpinner})),a=_e("text"),c=_e("password"),o=function(t){t.clear(),e(We())};return Object(re.jsx)(re.Fragment,{children:n?Object(re.jsx)(nt,{handleLogin:function(n){n.preventDefault();var r=function(){var e=null;return{set:function(t,n){if(t instanceof Function){var r=setTimeout(t,n);e=r}},clear:function(){e&&(clearTimeout(e),e=null)}}}();new Promise((function(n){var o;e((function(e){e({type:"".concat(Ge,"/spinner/show")})})),function(n){n.set((function(){t(Ke.failed),e(We())}),5e3)}(r),n(e((o={username:a.value,password:c.value},function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w(o),e.next=3,F.login(n);case 3:if(r=e.sent,y(r)){e.next=6;break}throw new Error("Invalid username or password");case 6:return t({type:"login/storeToken",payload:r}),t({type:"login/init",payload:r}),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))})).then((function(n){y(n)&&(o(r),e(ee()),t(Ke.success(n.name)),a.clearField(),c.clearField(),e(He()))})).catch((function(e){o(r),t(Ke.error(e.message))}))},username:a,password:c,showSpinner:r}):null})},ct=function(e){var t=e.handleSubmit;return Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({onClick:t},{size:"xs",fontSize:"12px",borderRadius:"6px",color:"black",bg:"red.500",_hover:{bg:"red.800",color:"white"}}),{},{children:"logout"}))},ot=function(){var e=Object(u.b)(),t=Object(l.a)(),n=Object(u.c)((function(e){return e.login}));return 0===Object.keys(n).length?null:Object(re.jsx)(ct,{handleSubmit:function(n){n.preventDefault();try{var r,a=null===(r=E())||void 0===r?void 0:r.name;e((function(e){var t;(null===(t=E())||void 0===t?void 0:t.name)&&e({type:"login/logout",payload:{}})})),e((function(e){e({type:"".concat(Ge,"/show")})})),function(e){e&&t(Ze.success(e))}(a),e((function(e){e({type:"notes/clear"})}))}catch(n){t(Ze.failed(n.message))}}})},it=function(e){var t=e.toggleVisibility;return Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},{size:"xs",bgColor:"blue.300"}),{},{onClick:function(e){e.preventDefault(),t()},children:"login"}))},st=function(e){var t=e.toggleVisibility;return Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},{size:"xs",bgColor:"green.300"}),{},{onClick:function(e){e.preventDefault(),t()},children:"sign up"}))},ut=function(e){var t=e.name;return Object(re.jsxs)("p",{style:{display:"inline",marginLeft:"5px",fontFamily:'"Lato", sans-serif'},children:["logged in as ",t]})},lt=function(){var e=Object(u.c)((function(e){return e.login})),t=Object(u.b)(),n={display:"inline",fontSize:"0.9em",fontStyle:"italic",wordSpacing:"-0.1em"};return y(e)?Object(re.jsxs)("div",{style:n,children:[Object(re.jsx)(ot,{}),Object(re.jsx)(ut,{name:e.name})]}):Object(re.jsxs)("div",{style:n,children:[Object(re.jsx)(it,{toggleVisibility:function(){t(He())}}),Object(re.jsx)(st,{toggleVisibility:function(){t((function(e){e({type:"".concat(Me,"/toggle")})}))}})]})},bt=n(238),dt=n(117),jt=n(118),pt=Object(Oe.a)(dt.a),ft=Object(Oe.a)(jt.a),Ot={padding:"0",marginLeft:"0",fontSize:"14",fontFamily:'"Lato",  sans serif'},ht={fontWeight:"bold"},vt={listStyleType:"none"},gt=Object(re.jsx)(bt.a,{as:pt,color:"green.500"}),mt=Object(re.jsx)(bt.a,{as:ft,color:"red.500"}),xt="Username must have at least ".concat(6," characters"),wt="You must have a first and a last name",yt=function(e){return/[a-zA-Z]/.test(e)},kt=function(e){return/\d/.test(e)},St=function(e,t){return e.length>=t},Ft=function(e){if(!e)throw console.error("argument to parseSignupData is falsey"),new Error("Unexpected error. Please refresh the page");var t,n=e;if("firstName"in n&&Ct(n.firstName,1)){if("lastName"in n&&Ct(n.lastName,1)){if("username"in n&&Ct(n.username,6)){if("password"in n&&(t=n.password,yt(t)&&kt(t)&&St(t,8))){if("verify"in n&&n.verify===n.password)return{username:n.username,name:n.firstName+" "+n.lastName,password:n.password};throw new Error("Passwords do not match")}throw new Error("Invalid password format")}throw new Error(xt)}throw new Error(wt)}throw new Error(wt)},Ct=function(e,t){return T(e)&&St(e,t)},Et=function(e){var t=e.letterIsValid,n=e.numberIsValid,r=e.characterIsValid;return Object(re.jsxs)(d.a,Object(f.a)(Object(f.a)({},Ot),{},{children:[Object(re.jsx)(d.a,Object(f.a)(Object(f.a)({as:"span"},ht),{},{children:"Password"})),Object(re.jsxs)(bt.c,Object(f.a)(Object(f.a)({},vt),{},{children:[Object(re.jsxs)(bt.b,{children:[t?gt:mt,"1 letter minimum"]}),Object(re.jsxs)(bt.b,{children:[n?gt:mt,"1 number minimum"]}),Object(re.jsxs)(bt.b,{children:[r?gt:mt,"8 characters minimum"]})]}))]}))},Nt=function(e){var t=e.password,n=Object(r.useState)(!1),a=Object(be.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(!1),s=Object(be.a)(i,2),u=s[0],l=s[1],b=Object(r.useState)(!1),d=Object(be.a)(b,2),j=d[0],p=d[1];return Object(r.useEffect)((function(){o(St(t,8)),l(kt(t)),p(yt(t))}),[t]),Object(re.jsx)(Et,{letterIsValid:j,numberIsValid:u,characterIsValid:c})},It=function(e){var t=e.characterIsValid,n=e.usernameAvailable;return Object(re.jsxs)(d.a,Object(f.a)(Object(f.a)({},Ot),{},{children:[Object(re.jsx)(d.a,Object(f.a)(Object(f.a)({as:"span"},ht),{},{children:"Username"})),Object(re.jsxs)(bt.c,Object(f.a)(Object(f.a)({},vt),{},{children:[Object(re.jsxs)(bt.b,{children:[t?gt:mt,"6 characters minimum"]}),Object(re.jsxs)(bt.b,{children:[n?gt:mt,"checked"]})]}))]}))},_t=function(e){var t=e.username,n=Object(r.useState)(!1),a=Object(be.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(!1),s=Object(be.a)(i,2),l=s[0],b=s[1],d=Object(u.c)((function(e){return e.signup}));return Object(r.useEffect)((function(){o(St(t,6)),b(d.includes(t.toLowerCase()))}),[t,d]),Object(re.jsx)(It,{characterIsValid:c,usernameAvailable:l})},At=function(e){var t=e.password,n=e.username,r=e.gridArea;return Object(re.jsxs)(d.a,{gridArea:r,children:[Object(re.jsx)(_t,{username:n}),Object(re.jsx)(Nt,{password:t})]})},Vt="/api/users",zt={signup:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(Vt,t);case 3:if(n=e.sent,r=n.data,y(r)){e.next=7;break}throw new Error("Failed to create account. Please try again");case 7:return e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(null===(a=e.t0.response)||void 0===a?void 0:a.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),checkUsernameAvailable:function(){var e=Object(v.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(Vt,"/").concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Username available checking error with backend: ".concat(null===(a=e.t0.response)||void 0===a?void 0:a.data.error));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Dt=function(){var e=Object(v.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt.checkUsernameAvailable(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"signup/username/save":return R(r)?[].concat(Object(g.a)(e),[r]):Object(g.a)(e);default:return Object(g.a)(e)}},Pt=3e3,Tt={failed:function(e){return{description:e,status:"error",duration:Pt,isClosable:!0}},success:{description:"Account successfully created",status:"success",duration:Pt,isClosable:!0},available:function(e){return{description:"username ".concat(e," is available"),status:"success",duration:Pt,isClosable:!0}}},Rt=function(e){var t=e.username,n=Object(u.b)(),r=Object(l.a)();return Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},{fontSize:"12px",height:"24px",alignSelf:"center",color:"white",width:"min-content",marginLeft:"6px",backgroundColor:"red.700",_hover:{bg:"red.500",cursor:"pointer"},_focus:{bg:"blue"}}),{},{as:"div",onClick:function(e){e.preventDefault();var a=t.toLowerCase();new Promise((function(e){if(t.length<6)throw new Error(xt);e(n(function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n,r){var a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.toLowerCase(),!(c=r().signup)||!c.includes(a)){t.next=6;break}return t.abrupt("return",!0);case 6:return t.next=8,Dt(a);case 8:if(!t.sent){t.next=14;break}return n({type:"signup/username/save",payload:e}),t.abrupt("return",!0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(a)))})).then((function(e){"boolean"===typeof e&&r(e?Tt.available(t):Tt.failed("username ".concat(t," is already taken")))})).catch((function(e){r(Tt.failed(e.message)),console.log("failed checking availability: ".concat(e.message))}))},children:"check"}))},Jt=Object(Oe.a)(tt.c),Ut=Object(Oe.a)(tt.b),Bt=Object(Oe.a)(tt.a),Gt=function(e){var t=e.firstName,n=e.lastName,r=e.username,a=e.password,c=e.verify,o=e.spinnerVisible,i=e.handleSignup,s={size:"sm",w:"100%",variant:"filled"},u={size:"xs",textColor:"white",bgColor:"blue.700",width:"min-content",_hover:{bg:"blue.400"},justifySelf:"right",marginRight:"10px",display:"inline",type:"submit"},l=o?Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},u),{},{gridArea:"submit",isLoading:!0,onSubmit:i,children:"sign up"})):Object(re.jsx)(pe.a,Object(f.a)(Object(f.a)({},u),{},{gridArea:"submit",onSubmit:i,children:"sign up"}));return Object(re.jsx)(de.a,{as:"form",onSubmit:i,children:Object(re.jsxs)(se.a,Object(f.a)(Object(f.a)({},{templateColumns:"1fr 1fr",templateAreas:"'firstName lastName'\n            'username username'\n            'password verify'\n            'tooltips submit'",width:400,columnGap:"5px",rowGap:"7px"}),{},{children:[Object(re.jsxs)(Xe.a,Object(f.a)(Object(f.a)({},s),{},{gridArea:"firstName",children:[Object(re.jsx)($e.a,{pointerEvents:"none",children:Object(re.jsx)(Bt,{})}),Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},t),s),{},{maxlength:20,placeholder:"first name"}))]})),Object(re.jsx)(Xe.a,Object(f.a)(Object(f.a)({},s),{},{gridArea:"lastName",children:Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},n),s),{},{maxlength:20,placeholder:"last name"}))})),Object(re.jsxs)(Xe.a,Object(f.a)(Object(f.a)({},s),{},{gridArea:"username",children:[Object(re.jsx)($e.a,{pointerEvents:"none",children:Object(re.jsx)(Jt,{})}),Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},r),s),{},{maxlength:24,placeholder:"username"})),Object(re.jsx)(Rt,{username:r.value})]})),Object(re.jsxs)(Xe.a,Object(f.a)(Object(f.a)({},s),{},{gridArea:"password",children:[Object(re.jsx)($e.a,{pointerEvents:"none",children:Object(re.jsx)(Ut,{})}),Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},a),s),{},{maxlength:18,placeholder:"password"}))]})),Object(re.jsx)(Xe.a,Object(f.a)(Object(f.a)({},s),{},{gridArea:"verify",children:Object(re.jsx)(Ae.a,Object(f.a)(Object(f.a)(Object(f.a)({},c),s),{},{placeholder:"verify"}))})),Object(re.jsx)(At,{username:r.value,password:a.value,gridArea:"tooltips"}),l]}))})},Mt=function(){var e=Object(u.c)((function(e){return e.userFormViews.signupForm})),t=Object(u.c)((function(e){return e.userFormViews.signupSpinner})),n=Object(u.b)(),r=Object(l.a)(),a=_e("text"),c=_e("text"),o=_e("text"),i=_e("password"),s=_e("password");return e?Object(re.jsx)(Gt,{username:a,firstName:c,lastName:o,password:i,verify:s,handleSignup:function(e){e.preventDefault(),new Promise((function(e){var t;n((function(e){e({type:"".concat(Me,"/spinner/show")})})),e(n((t={username:a.value,firstName:c.value,lastName:o.value,password:i.value,verify:s.value},function(){var e=Object(v.a)(h.a.mark((function e(n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft(t),e.next=3,zt.signup(r);case 3:return a=e.sent,n({type:"login/storeToken",payload:a}),n({type:"login/init",payload:a}),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))})).then((function(e){y(e)&&(r(Ke.success(e.name)),a.clearField(),c.clearField(),o.clearField(),i.clearField(),s.clearField(),n((function(e){e({type:"".concat(Me,"/hide")})})))})).catch((function(e){console.error("Failed to create user: ".concat(e.message)),r(Tt.failed("Failed to create user"))})).finally((function(){n((function(e){e({type:"".concat(Me,"/spinner/hide")})}))}))},spinnerVisible:t}):null};var Ht=function(){var e=Object(u.b)(),t=Object(l.a)();return Object(r.useEffect)((function(){try{e(ee()),e((function(e){var t=E();t&&e({type:"login/init",payload:t})}))}catch(n){console.error("Network error during notes initialization"),t(p.failedGet)}}),[e]),Object(re.jsx)(b.a,{children:Object(re.jsx)(i.a,{children:Object(re.jsxs)(d.a,{children:[Object(re.jsx)(ae,{}),Object(re.jsx)(lt,{}),Object(re.jsxs)(s.c,{children:[Object(re.jsxs)(s.a,{path:"/notes",children:[Object(re.jsx)(Ie,{}),Object(re.jsx)(ze,{})]}),Object(re.jsx)(s.a,{path:"/pad",children:Object(re.jsx)(Be,{})}),Object(re.jsx)(s.a,{path:"/",children:Object(re.jsx)(ce,{})})]})," ",Object(re.jsx)("br",{}),Object(re.jsx)(at,{}),Object(re.jsx)(Mt,{})]})})})},Wt=n(62),qt=n(119),Yt=Object(Wt.c)({notes:te,login:N,signup:Lt,userFormViews:qe,noteActionViews:me}),Kt=Object(Wt.d)(Yt,Object(Wt.a)(qt.a));n(211);o.a.render(Object(re.jsx)(u.a,{store:Kt,children:Object(re.jsx)(Ht,{})}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.62b4979c.chunk.js.map