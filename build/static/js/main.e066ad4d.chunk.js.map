{"version":3,"sources":["constants.tsx","utils/toasts/notes.tsx","validators/loginValidators.ts","services/loginService.tsx","state/reducers/login.ts","services/notesService.tsx","validators/parsers.ts","validators/noteValidators.ts","utils/computations.ts","state/reducers/notes.ts","components/NavBar.tsx","components/Home.tsx","components/notes/SkeletonList.tsx","state/reducers/noteActionViews.ts","components/notes/EditButton.tsx","components/notes/DeleteButton.tsx","components/notes/NoteRowSortable.tsx","components/notes/NotesList.tsx","utils/hooks.ts","components/notes/NoteForm.tsx","validators/padValidators.ts","services/padService.tsx","state/reducers/pad.ts","utils/toasts/pad.tsx","components/pad/Pad.tsx","state/reducers/userFormViews.ts","utils/toasts/login.tsx","components/login/LoginForm.tsx","components/login/LogoutButton.tsx","components/login/LoginButton.tsx","components/signup/SignupButton.tsx","components/UserBar.tsx","components/signup/tooltips/styling.tsx","validators/userValidators.ts","components/signup/tooltips/Password.tsx","components/signup/tooltips/Username.tsx","components/signup/tooltips/Tooltips.tsx","services/signupService.tsx","state/reducers/signup.ts","utils/toasts/signup.tsx","components/signup/CheckUsernameButton.tsx","components/signup/SignupForm.tsx","App.tsx","state/store.ts","index.tsx"],"names":["DEFAULT_TOAST_DURATION","USERNAME_ERROR","NAME_ERROR","noteToasts","notLoggedIn","description","status","duration","DEFAULT_DURATION","isClosable","noteTooShort","failedGet","failedCreate","parseCredentials","value","isCredentials","username","password","Error","isTokenData","login","credentials","a","console","log","axios","post","data","response","error","generateAuthHeader","tokenData","getStoredToken","headers","token","userString","window","localStorage","getItem","parseTokenData","JSON","parse","reducer","state","type","payload","setItem","stringify","removeItem","baseUrl","UPDATE_POSITION","UPDATE_CONTENT","update","toUpdate","url","_exhaustiveCheck","put","getAll","header","get","notes","addNew","note","body","remove","noteId","delete","isString","String","isStringAndExists","isNote","parser","_id","content","created","isDate","position","isNewNote","isUpdatePayload","match","isNotesArray","Array","isArray","every","Boolean","Date","parseNotePositions","parsed","i","length","notePositionWithId","push","incrementNumberString","Number","isBetween","num","min","max","filterOutNote","idToFilter","filter","updatePositionsSorted","moved","activeIndex","overIndex","changedNotes","updated","moveArray","toMove","arrayMove","updatePositionsSortedInDb","positions","notesService","updatePositionsDeleted","deletedPosition","initializeNotes","dispatch","id","newState","index","findIndex","NavBar","as","Link","to","d","Home","SkeletonList","rows","rowStyle","list","Fragment","style","visibility","baseEditType","isEditing","CAiFillEdit","chakra","AiFillEdit","EditButtonView","handleEdit","buttonStyle","icon","onClick","EditButton","useDispatch","e","preventDefault","DeleteButtonView","handleDelete","toggleHighlight","onMouseOver","onMouseOut","DeleteButton","getState","message","removeNote","noteContent","document","getElementById","color","EditTextarea","useState","edited","setEdited","textarea","useRef","useEffect","saveNote","toSave","editNote","onSubmit","ref","height","padding","verticalAlign","overflow","autoFocus","autoComplete","spellCheck","onChange","currentTarget","onBlur","display","NoteRowSortable","useSortable","setNodeRef","attributes","listeners","transition","transform","sortableStyle","x","y","undefined","actionTracker","useSelector","noteActionViews","isBeingEdited","contentNode","autosize","querySelector","NotesList","theList","map","onDragEnd","active","over","original","sortNote","modifiers","restrictToVerticalAxis","restrictToParentElement","collisionDetection","closestCenter","items","strategy","verticalListSortingStrategy","useField","initial","setValue","event","clearField","NoteFormView","forwardRef","noteInput","styles","input","button","NoteForm","toast","useToast","checkAndNotifyIfNoteIsInvalid","toasts","formInput","addEventListener","code","current","activeElement","focus","lastNote","at","newNote","toString","temp_id","Math","round","random","noteWithId","isPad","test","user","parsePad","pad","getPad","padService","padToasts","Pad","Object","keys","Promise","resolve","then","editorRef","setContent","catch","getContent","editor","onInit","_evt","init","skin","menubar","plugins","statusbar","toolbar","toolbar_mode","contextmenu","width","branding","image_caption","forced_root_block","save_onsavecallback","baseLoginType","baseSignupType","toggleLoginForm","hideLoginSpinner","loginForm","loginSpinner","signupForm","signupSpinner","loginToasts","failed","success","name","logoutToasts","LoginFormView","handleLogin","showSpinner","CFaUserAlt","FaUserAlt","CFaLock","FaLock","spacing","pointerEvents","children","placeholder","isVisible","SpinnerView","LoginForm","formVisible","userFormViews","spinnerVisible","clearToastsAndSpinner","timeout","clear","timeoutId","set","func","Function","setTimeout","clearTimeout","useTimeout","notifyIfTimedOut","loginInfo","loginService","LogoutButtonView","handleSubmit","bg","LogoutButton","notifyLogout","LoginButton","toggleVisibility","SignupButton","NameView","UserBar","inline","CheckCircle","MdCheckCircle","Cross","ImCross","tooltipStyle","headingStyle","listStyle","ValidIndicator","InvalidIndicator","hasAtLeastOneLetter","hasAtLeastOneNumber","hasAtLeastXCharacters","parseSignupData","pass","isValidLength","firstName","lastName","verify","usernameErr","nameErr","minLength","PasswordTooltipsView","letterIsValid","numberIsValid","characterIsValid","PasswordTooltips","setCharacterValidity","setNumberValidity","setLetterValidity","UsernameTooltipsView","usernameAvailable","UsernameTooltips","setCharacterIsValid","setUsernameAvailable","availableUsernames","signup","includes","toLowerCase","Tooltips","gridArea","Username","Password","checkUsernameAvailable","isAvailable","checkDatabaseForAvailability","signupService","signupToasts","available","UsernameAvailableButton","cursor","lowercase","checkAvailability","CFaAddressCard","FaAddressCard","SignupFormView","handleSignup","inputStyle","SubmitButton","isLoading","maxlength","SignupForm","signupInfo","finally","App","path","root","combineReducers","notesReducer","loginReducer","signupReducer","store","createStore","applyMiddleware","thunk","ReactDOM","render"],"mappings":"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","file":"static/js/main.e066ad4d.chunk.js","sourcesContent":["export const MIN_PASSWORD_LENGTH = 8 as number;\nexport const MAX_NAME_LENGTH = 20 as number;\nexport const MIN_NAME_LENGTH = 1 as number;\nexport const MAX_USERNAME_LENGTH = 24 as number;\nexport const MIN_USERNAME_LENGTH = 6 as number;\nexport const MAX_PASSWORD_LENGTH = 18 as number;\n\nexport const MIN_NOTE_LENGTH = 4 as number;\nexport const DEFAULT_TOAST_DURATION = 3000;\n\nexport const USERNAME_ERROR = `Username must have at least ${MIN_USERNAME_LENGTH} characters`;\nexport const NAME_ERROR = `You must have a first and a last name`;\nexport const PASSWORD_ERROR = `Invalid password format`;\nexport const VERIFY_ERROR = `Passwords do not match`;","import { MIN_NOTE_LENGTH, DEFAULT_TOAST_DURATION as DEFAULT_DURATION } from \"../../constants\";\n\nexport const noteToasts = (() => {\n    const notLoggedIn = {\n        description: 'You need to be logged in to add notes',\n        status: 'error' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true,\n    };\n\n    const noteTooShort = () => {\n        return {\n            description: `Note needs to be at least ${MIN_NOTE_LENGTH} characters long`,\n            status: 'error' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true\n        };\n    };\n\n    const failedGet = {\n        description: `Failed to get notes, please check your network`,\n        status: 'error' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true,\n    };\n\n    const failedCreate = {\n        description: `Failed to create note`,\n        status: 'error' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true,\n    };\n\n    return {\n        notLoggedIn,\n        noteTooShort,\n        failedGet,\n        failedCreate\n    };\n})();","import { Credentials, TokenData } from \"../types\";\n\nexport const parseTokenData = (value: unknown): TokenData => { //Fix this?\n    if (!value || !isTokenData(value)) throw new Error(`Invalid or missing token`);\n    return value;\n};\n\nexport const parseCredentials = (value: unknown): Credentials => {\n    if (isCredentials(value)) {\n        return {\n            username: value.username,\n            password: value.password\n        };\n    } else {\n        throw new Error(`Invalid username or password`);\n    }\n};\n\nexport const isTokenData = (value: unknown): value is TokenData => {\n    if (value && typeof value === 'object') {\n        return 'token' in value\n            && 'username' in value\n            && 'name' in value;\n    }\n    return false;\n};\n\nconst isCredentials = (value: unknown): value is Credentials => {\n    if (value && typeof value === 'object') {\n        if ('username' in value && 'password' in value) return true;\n    }\n    return false;\n};","import axios, { AxiosError } from 'axios';\nimport { Credentials, TokenData } from '../types';\n\nconst baseUrl = '/api/login';\n\nconst login = async (credentials: Credentials) => {\n    try {\n        console.log(`logging in`);\n        const { data } = await axios.post<TokenData>(baseUrl, {...credentials});\n        return data;\n    } catch(e) {\n        throw new Error((e as AxiosError).response?.data.error);\n        \n    }\n};\n\nexport default {\n    login,\n};","import { TokenData, ActionPayload } from \"../../types\";\nimport { parseCredentials, parseTokenData, isTokenData } from \"../../validators/loginValidators\";\nimport { AppDispatch } from \"../store\";\nimport loginService from '../../services/loginService';\n\nconst reducer = (state = {}, { type, payload }: ActionPayload) => {\n    const localStorage = window.localStorage;\n\n    switch(type) {\n        case 'login/init': {\n            if (isTokenData(payload)) return {...payload};\n            return {...state};\n        }\n        case 'login/storeToken': {\n            if (isTokenData(payload)) {\n                localStorage.setItem('tokenData', JSON.stringify(payload));\n                return {...payload};\n            } else {\n                console.error(`Missing or invalid token after login, cannot set to localStorage`);\n            }\n            return {...state};\n        }\n        case 'login/logout': {\n            localStorage.removeItem('tokenData');\n            return {};\n        }\n        default: return {...state};\n    }\n};\n\nexport const logout = () => (dispatch: AppDispatch) => {\n    const name = getStoredToken()?.name;\n    if (name) {\n        dispatch({\n            type: 'login/logout',\n            payload: {}\n        });\n    }\n};\n\nexport const saveTokenToState = () => (dispatch: AppDispatch) => {\n    const user = getStoredToken();\n    if (user) {\n        dispatch({\n            type: 'login/init',\n            payload: user\n        });\n    }\n};\n\nexport const saveTokenToLocalStorage = (token: TokenData) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: 'login/storeToken',\n        payload: token\n    });\n};\n\nexport const generateAuthHeader = () => {\n    const tokenData = getStoredToken();\n    if (tokenData) {\n        const header = { headers: { 'authorization': tokenData.token }};\n        return header;\n    } else return null;\n};\n\nexport const login = (loginInfo: unknown) => async (dispatch: AppDispatch) => {\n    const credentials = parseCredentials(loginInfo);\n    const token = await loginService.login(credentials);\n\n    if (!isTokenData(token)) {\n        throw new Error(`Invalid username or password`);\n    }\n\n    dispatch({\n        type: 'login/storeToken',\n        payload: token\n    });\n    \n    dispatch({\n        type: 'login/init',\n        payload: token\n    });\n    return token;\n};\n\nexport const getStoredToken = (): TokenData | null => {\n    const localStorage = window.localStorage;\n    const userString = localStorage.getItem('tokenData');\n\n    if (!userString) return null; //To check against empty localStorage value\n\n    const userLogin: unknown = JSON.parse(userString);\n\n    return parseTokenData(userLogin);\n};\n\nexport const userIsLoggedIn = () => {\n    return (Boolean(getStoredToken()));\n};\n\nexport default reducer;","import axios, { AxiosError } from 'axios';\nimport { Note, NewNote, NoteIdPosition } from '../types';\nimport { getStoredToken } from '../state/reducers/login';\n\nconst baseUrl = '/api/notes';\n\nexport const UPDATE_POSITION = \"POSITION\";\nexport const UPDATE_CONTENT = \"CONTENT\";\ntype UpdateType = typeof UPDATE_POSITION | typeof UPDATE_CONTENT;\n\nconst update = async (toUpdate: NoteIdPosition[] | Note, type: UpdateType) => {\n    let url = baseUrl;\n    switch(type) {\n        case UPDATE_POSITION: {\n            url += '/position';\n            break;\n        }\n        case UPDATE_CONTENT: {\n            url += '/content';\n            break;\n        }\n        default: {\n            const _exhaustiveCheck: never = type;\n            return _exhaustiveCheck;\n        }\n    }\n    const response = await axios.put(url, toUpdate);\n    return response;\n};\n\nconst getAll = async () => {\n    const tokenData = getStoredToken();\n    if (tokenData) {\n        const header = {headers: {'authorization': tokenData.token}};\n        \n        const { data: notes } = await axios.get<Note[]>(\n            baseUrl,\n            header\n        );\n        return notes;\n    } else return null;\n};\n\nconst addNew = async (note: NewNote) => {\n    const tokenData = getStoredToken();\n    try {\n        if (tokenData) {\n            const body = {\n                note, \n                token: tokenData.token\n            };\n\n            const { data } = await axios.post<Note>(baseUrl, body);\n\n            return data;\n        } else throw new Error(`Failed to add note, user currently not logged in`);\n    } catch(e) {\n        throw new Error((e as AxiosError).response?.data);\n    }\n    \n};\n\n//Note deletion fails from here onwards\nconst remove = async (noteId: string, toUpdate: NoteIdPosition[]) => { \n    const tokenData = getStoredToken();\n    if (tokenData) {\n        const data = tokenData.token;\n        const response = await axios.delete(\n            `${baseUrl}/${noteId}`,\n            {data: {\n                token: data,\n                toUpdate\n            }}\n        );\n        return response;\n    } else {\n        throw new Error(`Failed to delete note, user currently not logged in`);\n    }\n};\n\nexport default {\n    getAll,\n    addNew,\n    remove,\n    update\n};","\nexport const parseString = (value: unknown, errorMsg?: string): string => {\n    if (!value || !isString(value)) {\n        if (errorMsg) throw new Error(errorMsg);\n        else throw new Error(`Invalid or missing string: ${JSON.stringify(value)}`);\n    }\n    return value;\n};\n\nexport const isString = (value: unknown): value is string => {\n    return typeof value === 'string' || value instanceof String;\n};\n\nexport const isStringAndExists = (value: unknown): value is string => { //Tested, works properly\n    if (!value && !(typeof value === 'string')) return false;\n    else if (!isString(value)) return false;\n    return true;\n};\n\nexport default {\n    isString,\n    isStringAndExists\n};","import { Note, NewNote, PositionPayload, NoteIdPosition, UpdatePayload } from '../types';\nimport parser from './parsers';\n\nexport const isNewNote = (value: unknown): value is NewNote => {\n    if (!value) return false;\n    else if (!parser.isStringAndExists((value as NewNote).content)) return false;\n    else if (!parser.isStringAndExists((value as NewNote).created) \n        || !isDate((value as NewNote).created)) return false;\n    else if (!parser.isStringAndExists((value as NewNote).position)) return false;\n    return true;\n};\n\nexport const isNote = (value: unknown): value is Note => {\n    if (!value) return false;\n    if (!parser.isStringAndExists((value as Note)._id)) return false;\n    else if (!isNewNote(value)) return false;\n    return true;\n};\n\nexport const isUpdatePayload = (value: unknown): value is UpdatePayload => {\n    if (!value) return false;\n    if (!parser.isStringAndExists((value as UpdatePayload).match)) return false;\n    return isNote((value as UpdatePayload).note);\n};\n\nexport const isNoteAndExists = (value: unknown): boolean => {\n    if (!value) return false;\n    else if (!isNote(value)) return false;\n\n    return true;\n};\n\nexport const isNotesArray = (value: unknown): value is Note[] => {\n    return Array.isArray(value) && value.every(isNote);\n};\n\nexport const createTempNoteId = () => {\n    return JSON.stringify(Math.round(Math.random() * 100000000));\n};\n\nexport const isPositionPayload = (value: unknown): value is PositionPayload => {\n    if (value) {\n        const payload = (value as PositionPayload);\n\n        if ('activeIndex' in payload && typeof payload.activeIndex === 'number'\n        && 'overIndex' in payload && typeof payload.overIndex === 'number') return true;\n    }\n    return false;\n};\n\nconst isDate = (value: string): boolean => {\n    return Boolean(Date.parse(value));\n};\n\nexport const parseNotePositions = (notes: Note[]): NoteIdPosition[] => {\n    const parsed = [] as NoteIdPosition[];\n\n    for (let i = 0; i < notes.length; i++) {\n        const note = notes[i];\n        const notePositionWithId = {\n            _id: note._id,\n            position: note.position,\n        };\n        parsed.push(notePositionWithId);\n    }\n    return parsed;\n};","export const incrementNumberString = (value: string) => {\n    return JSON.stringify(Number(value) + 1);\n};\n\nexport const decrementNumberString = (value: string) => {\n    return JSON.stringify(Number(value) - 1);\n};\n\nexport const isBetween = (num: number, min: number, max: number) => {\n    return num >= min && num <= max;\n};","import notesService, { UPDATE_CONTENT, UPDATE_POSITION } from \"../../services/notesService\";\nimport { Note, NewNote } from \"../../types\";\nimport { createTempNoteId, isNote, isNotesArray, isUpdatePayload, parseNotePositions } from \"../../validators/noteValidators\";\nimport parser from '../../validators/parsers';\nimport { AppDispatch, AppGetState } from \"../store\";\nimport { ActionPayload } from '../../types';\nimport { arrayMove } from \"@dnd-kit/sortable\";\nimport { decrementNumberString, incrementNumberString, isBetween } from \"../../utils/computations\";\n\nconst FIRST_NOTE_ID = '0' as string;\n\nconst reducer = (state = [] as Note[], { type, payload }: ActionPayload) => {\n    switch(type) {\n        case 'notes/initialize': {\n            if (isNotesArray(payload)) {\n                return [...payload];\n            } else {\n                return [...state];\n            }\n        }\n        case 'notes/remove': {\n            if (parser.isStringAndExists(payload)) {\n                const id = payload;\n                const newState = filterOutNote(state, id);\n                return newState;\n            } else {\n                console.error(`Failed deletion of note state`);\n                return [...state];\n            }\n        }\n        case 'notes/create': {\n            if (isNote(payload)) {\n                return [\n                    ...state,\n                    payload\n                ];\n            } else {\n                console.error(`Failed adding created note to state`);\n                return [...state];\n            }\n        }\n        case 'notes/updateOne': {\n            if (isUpdatePayload(payload)) {\n                const notes = [...state];\n                const index = notes.findIndex(note => note._id === payload.match);\n                notes[index] = payload.note;\n                return notes;\n            } else {\n                console.error(`Payload in notes/updateOne reducer is not an UpdatePayload`);\n                return [...state];\n            }\n        }\n        case 'notes/updateArray': {\n            if (isNotesArray(payload)) {\n                return [...payload];\n            } else {\n                console.error(`Failed to update notes in notes reducer`);\n                return [...state];\n            }\n        }\n        case 'notes/clear': {\n            return [];\n        }\n        default: \n            return [...state];\n    }\n};\n\nconst filterOutNote = (notes: Note[], idToFilter: string) => {\n    return notes.filter((note: Note) => note._id !== idToFilter);\n};\n\n\nexport const editNote = (edited: Note) => async (dispatch: AppDispatch) => {\n    dispatch({\n        type: 'notes/updateOne',\n        payload: {\n            match: edited._id,\n            note: edited\n        }\n    });\n\n    try {\n        const updated = await notesService.update(edited, UPDATE_CONTENT);\n        return updated;\n    } catch(e) {\n        console.error(`Error deleting note: ${(e as Error).message}`);\n    }\n};\n\n\n//updates note.position values of the moved notes\n//note.position is used to track the position of the notes for the MongoDB database\n//arrayMove from dnd-kit only moves the notes in the store, with no way to track the \n// changes in position\nconst updatePositionsSorted = (moved: Note[], activeIndex: number, overIndex: number) => {\n    const changedNotes = [] as Note[];\n    if (overIndex > activeIndex) { //dragged vertically downwards\n        // for loops are much faster than callback function-based loops\n        for (let i = 0; i < moved.length; i++) {\n            const note = moved[i];\n            //Because the note was dragged downwards, all notes that the dragged note passed \n            // through will have its position in the notes array reduced by 1\n            if (isBetween(Number(note.position), activeIndex + 1, overIndex)) {\n                note.position = decrementNumberString(note.position);\n                changedNotes.push(note);\n            }\n        }\n    } else if (overIndex < activeIndex) { //dragged vertically upwards\n        for (let i = 0; i < moved.length; i++) {\n            const note = moved[i];\n            if (isBetween(Number(note.position), overIndex, activeIndex - 1)) {\n                note.position = incrementNumberString(note.position);\n                changedNotes.push(note);\n            }\n        }\n    }\n\n    //Finally updates the position value of the moved note itself\n    moved[overIndex].position = JSON.stringify(overIndex);\n    changedNotes.push(moved[overIndex]); \n\n    return {\n        updated: moved,\n        changedNotes\n    };\n};\nconst moveArray = <Type>(toMove: Type[], activeIndex: number, overIndex: number) => {\n    return [...arrayMove(toMove, activeIndex, overIndex)];\n};\nconst updatePositionsSortedInDb = async (notes: Note[]) => {\n    const positions = parseNotePositions(notes);\n    const updated = await notesService.update(positions, UPDATE_POSITION);\n    return updated;\n};\nexport const sortNote = (activeIndex: number, overIndex: number) => \nasync (dispatch: AppDispatch, getState: AppGetState) => {\n    const original = getState().notes;\n    const moved = moveArray<Note>(original, activeIndex, overIndex);\n\n    //updatedNotes=array of only notes that had position fields changed\n    const { updated, changedNotes } = updatePositionsSorted(moved, activeIndex, overIndex);\n\n    dispatch({\n        type: 'notes/updateArray',\n        payload: updated\n    });\n\n    await updatePositionsSortedInDb(changedNotes);\n};\n\n\nconst updatePositionsDeleted = (notes: Note[], deletedPosition: string) => {\n    const changedNotes = [] as Note[];\n    for(let i = 0; i < notes.length; i++) {\n        const note = notes[i];\n        if (Number(note.position) > Number(deletedPosition)) {\n            note.position = JSON.stringify(Number(note.position) - 1);\n            changedNotes.push(note);\n        }\n    }\n\n    return {\n        updated: notes,\n        changedNotes\n    };\n};\nexport const removeNote = (note: Note) => async (dispatch: AppDispatch, getState: AppGetState) => {\n    try {\n        const notes = [...getState().notes];\n        const deletedPosition = note.position;\n\n        const { updated, changedNotes } = updatePositionsDeleted(notes, deletedPosition);\n        const positions = parseNotePositions(changedNotes);\n\n        dispatch({\n            type: 'notes/updateArray',\n            payload: updated\n        });\n\n        dispatch({\n            type: 'notes/remove',\n            payload: note._id\n        });\n\n        await notesService.remove(note._id, positions);\n    } catch(e) {\n        console.error(`Error deleting note: ${(e as Error).message}`);\n    }\n};\n\n\nexport const clearNotes = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: 'notes/clear',\n    });\n};\n\nexport const initializeNotes = () => async (dispatch: AppDispatch) => {\n    const notes = await notesService.getAll();\n    dispatch({\n        type: 'notes/initialize',\n        payload: notes\n    });\n};\n\nexport const createNote = (content: string) => \nasync (dispatch: AppDispatch, getState: AppGetState) => {\n    const lastNote = getState().notes.at(-1);\n\n    const newNote: NewNote = {\n        content,\n        created: new Date().toString(),\n        position: lastNote \n            ? JSON.stringify(Number(lastNote.position) + 1)\n            : FIRST_NOTE_ID\n    };\n\n    const temp_id = createTempNoteId();\n\n    try {\n        //Note-creation is implemented in such a way that note-adding is instantaneous, instead\n        // of waiting for a response from the backend\n        dispatch({\n            type: 'notes/create',\n            payload: {\n                ...newNote,\n                _id: temp_id\n            }\n        });\n\n        const noteWithId = await notesService.addNew(newNote); \n        dispatch({\n            type: 'notes/remove',\n            payload: temp_id\n        });\n        dispatch({\n            type: 'notes/create',\n            payload: noteWithId\n        });\n    } catch(e) {\n        console.error(`Error adding note: ${(e as Error).message}`);\n    }\n};\n\nexport default reducer;","import { Breadcrumb, BreadcrumbItem, BreadcrumbLink } from '@chakra-ui/react';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst NavBar = () => {\n    const navStyle = {\n        \"separator\": \"-\",\n        \"fontWeight\": \"medium\",\n        \"fontSize\": \"25px\",\n        \"fontFamily\": \"flexa\",\n    };\n\n    return (\n        <Breadcrumb {...navStyle}>\n            <BreadcrumbItem>\n                <BreadcrumbLink as={Link} to='/' d=\"inline\">Home</BreadcrumbLink>\n            </BreadcrumbItem>\n\n            <BreadcrumbItem>\n                <BreadcrumbLink as={Link} to='/notes' d=\"inline\">Notes</BreadcrumbLink>\n            </BreadcrumbItem>\n\n            <BreadcrumbItem>\n                <BreadcrumbLink as={Link} to='/pad' d=\"inline\">Pad</BreadcrumbLink>\n            </BreadcrumbItem>\n\n            <BreadcrumbItem>\n                <BreadcrumbLink as={Link} to='/user' d=\"inline\">User</BreadcrumbLink>\n            </BreadcrumbItem>\n\n            <BreadcrumbItem>\n                <BreadcrumbLink as={Link} to='/about' d=\"inline\">About</BreadcrumbLink>\n            </BreadcrumbItem>\n        </Breadcrumb>\n    );\n};\n\nexport default NavBar;","import { Box } from '@chakra-ui/react';\nimport React from 'react';\n\nconst Home = () => {\n    const fontStyle = {\n        'fontFamily': '\"Lato\",  sans serif',\n        'fontSize': '16px',\n    };\n\n    return (\n        <Box {...fontStyle}>\n            <h3><i>Notes app, by Chiew Weng Keat</i></h3>\n            <p>\n                &emsp; total notes stored: <br />\n                &emsp; total users:\n            </p>\n        </Box>\n    );\n};\n\nexport default Home;","import { Skeleton, SkeletonCircle } from '@chakra-ui/react';\nimport React from 'react';\n\nconst SkeletonList = ({ rows }: { rows: number }) => {\n    const rowStyle = {\n        'height': '1.625rem',\n        'width': '31.25rem',\n        'alignSelf': 'center'\n    };\n\n    const list = [];\n    for (let i = 0; i < rows; i++) {\n        list.push(\n            <React.Fragment key={i}>\n                <Skeleton style={rowStyle} />\n                <SkeletonCircle visibility='hidden' />\n                <SkeletonCircle visibility='hidden'/>\n            </React.Fragment>);\n    }\n    return (\n        <>{list}</>\n    );\n};\n\nexport default SkeletonList;","\nimport { ActionPayload } from '../../types';\nimport { isString } from '../../validators/parsers';\nimport { AppDispatch } from '../store';\n\nconst baseEditType = 'noteActionViews/editing';\n\ninterface ActionState {\n    isEditing: boolean,\n    noteId: string | null,\n}\nconst reducer = (state = {isEditing: false, noteId: null} as ActionState, { type, payload }: ActionPayload) => {\n    switch(type) {\n        case `${baseEditType}/set`: {\n            if (isString(payload)) {\n                return {...state, isEditing: true, noteId: payload};\n            } else {\n                console.log(`Invalid noteId: ${JSON.stringify(payload)}`);\n                return {...state};\n            }\n        }\n        case `${baseEditType}/reset`: {\n            return {...state, isEditing: false, noteId: null};\n        }\n        default: return {...state};\n    }\n};\n\n\nexport const setEditMode = (noteId: string) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseEditType}/set`,\n        payload: noteId\n    });\n};\n\nexport const stopEditMode = () => (dispatch: AppDispatch) => {\n    dispatch({type: `${baseEditType}/reset`});\n};\n\nexport default reducer;","import { IconButton, chakra } from '@chakra-ui/react';\nimport React from 'react';\nimport { AiFillEdit } from 'react-icons/ai';\nimport { useDispatch } from 'react-redux';\nimport { setEditMode } from '../../state/reducers/noteActionViews';\nimport { Note } from '../../types';\n\nconst CAiFillEdit = chakra(AiFillEdit);\n\ninterface ViewProps {\n    handleEdit: (e: React.FormEvent) => void,\n    isEditing: boolean,\n}\nconst EditButtonView = ({ handleEdit, isEditing }: ViewProps) => {\n    const buttonStyle = {\n        \"bgColor\": isEditing ? \"gray.400\" : \"transparent\",\n        \"borderRadius\": \"full\",\n        \"size\": \"sm\",\n        \"_hover\": {\n            \"bgColor\": \"gray.400\"\n        },\n        \"title\": \"edit\",\n        \n    };\n\n    return (\n        <IconButton \n            {...buttonStyle}\n            aria-label='edit note' \n            icon={<CAiFillEdit />} \n            onClick={handleEdit} />\n    );\n};\n\ninterface ButtonProps {\n    note: Note,\n    isEditing: boolean,\n}\nconst EditButton = ({ note, isEditing }: ButtonProps) => {\n    const dispatch = useDispatch();\n\n    const handleEdit = (e: React.FormEvent) => {\n        e.preventDefault();\n        dispatch(setEditMode(note._id));\n    };\n\n    return (\n        <EditButtonView \n            isEditing={isEditing}\n            handleEdit={handleEdit} />\n    );\n};\n\nexport default EditButton;","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { DeleteIcon } from '@chakra-ui/icons';\nimport { IconButton } from '@chakra-ui/react';\n\nimport { removeNote } from '../../state/reducers/notes';\nimport { Note } from '../../types';\n\ninterface ViewProps {\n    handleDelete: (e: React.FormEvent) => void;\n    toggleHighlight: () => void;\n}\nconst DeleteButtonView = ({ handleDelete, toggleHighlight }: ViewProps) => {\n    const buttonStyle = {\n        \"color\": \"black\",\n        \"borderRadius\": \"full\",\n        \"bgColor\": \"transparent\",\n        \"size\": \"sm\",\n        \"_hover\": {\n            \"color\": \"white\",\n            \"bgColor\": \"red.900\"\n        },\n        \"title\": \"delete\",\n    };\n\n    return (\n        <IconButton\n            {...buttonStyle}\n            aria-label='delete'\n            icon={<DeleteIcon/>}\n            onClick={handleDelete}\n            onMouseOver={toggleHighlight}\n            onMouseOut={toggleHighlight}\n            >delete\n        </IconButton>\n    );\n};\n\nconst DeleteButton = ({ note }: { note: Note }) => {\n    const dispatch = useDispatch();\n\n    const handleDelete = (e: React.FormEvent) => {\n        e.preventDefault();\n        dispatch(removeNote(note));\n    };\n\n    const toggleHighlight = () => {\n        const noteContent = document.getElementById(note._id);\n        if (noteContent) {\n            switch(noteContent.style.color) {\n                case 'red': {\n                    noteContent.style.color = '';\n                    break;\n                }\n                case '': {\n                    noteContent.style.color = 'red';\n                    break;\n                }\n                default: break;\n            }\n        }\n    };\n\n    return (\n        <DeleteButtonView \n            handleDelete={handleDelete} \n            toggleHighlight={toggleHighlight}/>\n    );\n};\n\nexport default DeleteButton;","import React, { useEffect, useRef, useState } from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { Note } from '../../types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '../../state/store';\nimport { Box, Button, Center, FormControl, Textarea } from '@chakra-ui/react';\nimport EditButton from './EditButton';\nimport DeleteButton from './DeleteButton';\nimport { stopEditMode } from '../../state/reducers/noteActionViews';\nimport autosize from 'autosize';\nimport { editNote } from '../../state/reducers/notes';\n\nconst EditTextarea = ({ note }: { note: Note }) => {\n    const textareaStyle = {\n        height: \"32px\",\n        padding: \"0px\",\n        verticalAlign: \"top\",\n        overflow: 'hidden',\n    };\n\n\n    const dispatch = useDispatch();\n    const [edited, setEdited] = useState(note.content);\n    const textarea = useRef(null);\n\n    //When note is sorted, the note parameter changes, but edited maintains its \n    // original note.content's value, before the sort \n    //This line updates the value of edited every time the note is sorted\n    useEffect(() => {\n        setEdited(note.content);\n    }, [note.content]);\n\n\n    const saveNote = (e: React.FormEvent) => {\n        e.preventDefault();\n        dispatch(stopEditMode());\n        if (edited === note.content) return;\n\n        const toSave: Note = {...note, content: edited};\n        dispatch(editNote(toSave));\n    };\n\n    return (\n        <FormControl as=\"form\" onSubmit={saveNote}>\n            <Textarea \n                ref={textarea}\n                as=\"textarea\"\n                id={note._id}\n                style={textareaStyle}\n                autoFocus\n                autoComplete=\"off\"\n                value={edited}\n                rows={1}\n                spellCheck={false}\n                onChange={(e) => setEdited(e.currentTarget.value)}\n                onBlur={saveNote}\n                >\n            </Textarea>\n            <Button style={{display: \"none\"}} />\n        </FormControl>\n    );\n};\n\nconst NoteRowSortable = ({ note }: { note: Note }) => {\n    const {\n        setNodeRef,\n        attributes,\n        listeners,\n        transition,\n        transform,\n    } = useSortable({ id: note.position });\n\n    const sortableStyle = {\n        transition,\n        transform: transform\n            ? `translate3d(${transform?.x}px, ${transform?.y}px, 0)`\n            : undefined\n    };\n    \n    //Subscribes to when EditButton is pressed\n    const actionTracker = useSelector((state: RootState) => state.noteActionViews);\n    const isBeingEdited = actionTracker.isEditing && actionTracker.noteId === note._id;\n    \n    const content = (\n        <Box id={note._id}\n            ref={setNodeRef} \n            {...attributes} \n            {...listeners} \n            style={sortableStyle}>\n                {note.content}\n        </Box>\n    );\n\n    const contentNode = isBeingEdited\n        ? <EditTextarea note={note} />\n        : content;\n\n    useEffect(() => {\n        if (isBeingEdited) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            autosize(document.querySelector('textarea')!);\n        }\n    }, [isBeingEdited]);\n\n    return (\n        <React.Fragment key={note._id}>\n            {contentNode}\n            <Center>\n                <EditButton note={note} isEditing={isBeingEdited} />\n            </Center>\n            <Center>\n                <DeleteButton note={note} />\n            </Center>\n        </React.Fragment>\n    );\n};\n\nexport default NoteRowSortable;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '../../state/store';\n\nimport { DndContext, closestCenter } from '@dnd-kit/core';\nimport { restrictToParentElement, restrictToVerticalAxis } from '@dnd-kit/modifiers'; \nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable';\n\nimport { Note } from '../../types';\nimport { Grid } from '@chakra-ui/react';\n\nimport { sortNote } from '../../state/reducers/notes';\nimport { getStoredToken } from '../../state/reducers/login';\n\nimport SkeletonList from './SkeletonList';\nimport NoteRowSortable from './NoteRowSortable';\n\nconst NotesList = () => {\n    const notes: Note[] = useSelector((state: RootState) => state.notes);\n    const dispatch = useDispatch();\n\n    const gridStyle = {\n        \"mt\": \"1\",\n        \"templateColumns\": \"minmax(auto, 37.5rem) 1.875rem 1.875rem\",\n        \"autoRows\": \"min-max(2rem, max-content)\",\n        \"rowGap\": \"5px\",\n    };\n    const noteStyle = {\n        'fontFamily': '\"Lato\",  sans serif',\n        'fontSize': '1rem'\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const handleDragEnd = ({ active, over }: { active: any, over: any}) => {\n        if (!active || !over) return;\n        const activeIndex = notes.findIndex(note => note.position === active.id);\n        const overIndex = notes.findIndex(note => note.position === over.id);\n\n        // if(note was actually moved)\n        if(activeIndex !== overIndex) dispatch(sortNote(activeIndex, overIndex));\n        else return;\n    };\n\n    const theList = getStoredToken() && notes.length === 0\n        ? <SkeletonList rows={5} />\n        : notes.map(note => <NoteRowSortable note={note} key={note.position} />);\n\n    return (\n        <Grid {...gridStyle} {...noteStyle}>\n            <DndContext \n            onDragEnd={handleDragEnd} \n            modifiers={[restrictToVerticalAxis, restrictToParentElement]}\n            collisionDetection={closestCenter}>\n                <SortableContext \n                items={notes.map(note => note.position)} \n                strategy={verticalListSortingStrategy}>\n                    {theList}\n                </SortableContext>\n            </DndContext>\n        </Grid>\n    );\n};\n\nexport default NotesList;","import React, { useState } from 'react';\n\nexport const useField = (type: string, initial = '') => {\n    const [value, setValue] = useState(initial);\n    const onChange = \n        (event: React.FormEvent<HTMLInputElement>) => setValue(event.currentTarget.value);\n\n    const clearField = () => setValue('');\n\n    return {\n        type,\n        value,\n        onChange,\n        clearField\n    };\n};\n\nexport const useTimeout = () => {\n    let timeoutId: null | NodeJS.Timeout = null;\n    // const [timeoutId, setTimeoutId] = useState<NodeJS.Timeout>();\n\n    const set = (func: unknown, timeout: number) => {\n        if (func instanceof Function) {\n            const id = setTimeout(func, timeout) as unknown as NodeJS.Timeout;\n            timeoutId = id;\n        }\n    };\n    \n    const clear = () => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n            timeoutId = null;\n        }\n    };\n\n    return {\n        set,\n        clear\n    };\n};","import React, { forwardRef, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { createNote } from '../../state/reducers/notes';\nimport { useField } from '../../utils/hooks';\n\nimport { Input, Button, FormControl, useToast } from \"@chakra-ui/react\";\nimport { noteToasts as toasts } from '../../utils/toasts/notes';\nimport { UseField } from '../../types';\nimport { userIsLoggedIn } from '../../state/reducers/login';\n\nimport { MIN_NOTE_LENGTH } from '../../constants';\n\ntype FormViewProps = {\n    onSubmit(e: React.FormEvent): void,\n    noteInput: UseField,\n};\nconst NoteFormView = \n    forwardRef<HTMLInputElement, FormViewProps>(({ onSubmit, noteInput }, ref) => {\n    const styles = (() => {\n        const input = {\n            \"placeholder\": \"new note...\",\n            \"size\": \"sm\",\n            \"w\": \"min(95%, 27.5rem)\",\n            \"variant\": \"filled\",\n            \"borderRadius\": \"2xl\",\n            \"m\": 1.5,\n            \"ml\": -0.5,\n            \"colorScheme\": \"facebook\",\n            \"autoComplete\": \"off\",\n        };\n\n        const button = {\n            \"size\": \"xs\",\n            \"bgColor\": \"black\",\n            \"color\": \"white\",\n            \"colorScheme\": \"twitter\",\n            \"_hover\": {\n                \"bgColor\": \"gray.600\"\n            },\n            \"title\": \"save new note\",\n            \"type\": \"submit\" as const,\n        };\n\n        return {input, button};\n    })();\n\n    return (\n        <FormControl as=\"form\" onSubmit={onSubmit}>\n            <Input ref={ref} {...styles.input} {...noteInput}></Input>\n            <Button {...styles.button}>save</Button>\n        </FormControl>\n    );\n});\n\nconst NoteForm = () => {\n    const noteInput = useField('text');\n    const dispatch = useDispatch();\n    const toast = useToast();\n\n    const checkAndNotifyIfNoteIsInvalid = () => {\n        if (noteInput.value.length < MIN_NOTE_LENGTH) {\n            toast(toasts.noteTooShort());\n            return false;\n        } else if (!userIsLoggedIn()) {\n            toast(toasts.notLoggedIn);\n            return false;\n        }\n\n        return true;\n    };\n\n    const addNote = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        const noteIsValid = checkAndNotifyIfNoteIsInvalid();\n        if (!noteIsValid) return;\n\n        try {\n            dispatch(createNote(noteInput.value));\n            noteInput.clearField();\n        } catch(e) {\n            console.error((e as Error).message);\n            toast(toasts.failedCreate);\n        }\n    };\n\n    const formInput = useRef<HTMLInputElement>(null);\n    const addSlashListener = () => {\n        document.addEventListener('keyup', (event) => {\n            if (event.code === 'Slash' && formInput.current && !document.activeElement?.id) {\n                formInput.current.focus();\n            }\n        });\n    };\n    addSlashListener();\n\n    return <NoteFormView ref={formInput} onSubmit={addNote} noteInput={noteInput} />;\n};\n\nexport default NoteForm;","import { Pad } from \"../types\";\n\nexport const isPad = (value: unknown): value is Pad => {\n    const test = value as Pad;\n    return (\n        '_id' in test && typeof test._id === 'string' &&\n        'content' in test && typeof test.content === 'string' &&\n        'user' in test && typeof test.user === 'string'\n    );\n};\n\nexport const parsePad = (value: unknown) => {\n    if (!isPad(value)) throw new Error(`Value from backend is not a valid Pad object`);\n    return value;\n};","import axios, { AxiosError } from 'axios';\nimport { generateAuthHeader } from '../state/reducers/login';\nimport { Pad } from '../types';\nimport { parsePad } from '../validators/padValidators';\n\nconst baseUrl = '/api/pad';\n\nconst get = async () => {\n    try {\n        const header = generateAuthHeader();\n        if (header) {\n            const { data: pad } = await axios.get<Pad>(baseUrl, header);\n            return parsePad(pad);\n        } else return null;\n    } catch(e) {\n        throw new Error((e as AxiosError).response?.data);\n    }\n};\n\nconst update = async (content: string) => {\n    try {\n        const header = generateAuthHeader();\n        if (header) {\n            const { data: pad } = await axios.put<Pad>(baseUrl, {content}, header);\n            return pad;\n        } else return null;\n    } catch(e) {\n        throw new Error((e as AxiosError).response?.data);\n    }\n};\n\nexport default{\n    get,\n    update,\n};","import padService from \"../../services/padService\";\n\nexport const getPad = async () => {\n    return await padService.get();\n};\n\nexport const updatePad = async (content: string) => {\n    return await padService.update(content);\n};","import { DEFAULT_TOAST_DURATION as DEFAULT_DURATION } from \"../../constants\";\n\nexport const padToasts = (() => {\n    const error = {\n        description: 'Failed to retrieve Pad contents',\n        status: 'error' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true\n    };\n\n    return {\n        error\n    };\n})();","import React, { useEffect, useRef } from 'react';\nimport { Editor } from '@tinymce/tinymce-react';\nimport { Editor as EditorType } from 'tinymce/tinymce';\n\nimport 'tinymce/tinymce';\nimport 'tinymce/plugins/advlist';\nimport 'tinymce/plugins/autolink';\nimport 'tinymce/plugins/lists';\nimport 'tinymce/plugins/link';\nimport 'tinymce/plugins/image';\nimport 'tinymce/plugins/charmap';\nimport 'tinymce/plugins/print';\nimport 'tinymce/plugins/preview';\nimport 'tinymce/plugins/anchor';\nimport 'tinymce/plugins/help';\nimport 'tinymce/plugins/searchreplace';\nimport 'tinymce/plugins/visualblocks';\nimport 'tinymce/plugins/insertdatetime';\nimport 'tinymce/plugins/media';\nimport 'tinymce/plugins/table';\nimport 'tinymce/plugins/code';\nimport 'tinymce/plugins/save';\nimport 'tinymce/plugins/importcss';\nimport 'tinymce/icons/default';\nimport 'tinymce/skins/ui/oxide/skin.min.css';\nimport 'tinymce/skins/ui/oxide/content.min.css';\nimport 'tinymce/themes/silver';\nimport { useToast } from '@chakra-ui/react';\nimport padService from '../../services/padService';\nimport { getPad } from '../../state/reducers/pad';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../state/store';\nimport { isPad } from '../../validators/padValidators';\nimport { padToasts } from '../../utils/toasts/pad';\nimport { getStoredToken } from '../../state/reducers/login';\n\nconst Pad = () => {\n    const token = useSelector((state: RootState) => state.login);\n    const toast = useToast();\n\n    useEffect(() => {\n        if (Object.keys(token).length !== 0) {\n            new Promise((resolve) => {\n                const fetched = getPad();\n                resolve(fetched);\n            }).then(value => {\n                if (isPad(value)) {\n                    editorRef.current?.setContent(value.content);\n                }\n            }).catch((e) => {\n                console.error(`Failed to retrieve pad content: ${(e as Error).message}`);\n                toast(padToasts.error);\n            });    \n        } else {\n            editorRef.current?.setContent('');\n        }\n    }, [token]);\n\n    const handleEditorChange = () => {\n        console.log(`Content was updated: ${editorRef.current?.getContent()}`);\n    };\n\n    const editorStyle = {\n        \"display\": \"flex\",\n        \"flexDirection\": \"column\",\n        \"mt\": 2,\n    };\n\n    const saveNote = async () => {\n        if (editorRef.current) {\n            const content = editorRef.current.getContent();\n            await padService.update(content);\n        }\n    };\n    const editorRef: React.MutableRefObject<EditorType | null> = useRef(null);\n\n    const editor = (\n        <Editor\n            onInit={(_evt, editor) => { editorRef.current = editor; }}\n            init={{\n                skin: false,\n                menubar: false,\n                plugins: [\n                    'advlist autolink lists link image',\n                    'charmap print preview anchor help',\n                    'searchreplace visualblocks code importcss',\n                    'insertdatetime media table save',\n                ],\n                statusbar: false,\n                toolbar:\n                    'undo redo | bold italic |\\\n                    underline strikethrough | superscript subscript charmap code |\\\n                    alignleft aligncenter alignright alignjustify |\\\n                    bullist numlist outdent indent | blockquote |\\\n                    link image media table | forecolor backcolor |\\\n                    removeformat fontsizeselect | fontselect | save | help',\n                toolbar_mode: 'wrap',\n                contextmenu: false,\n                width: 'min(99%, 112.5rem)',\n                height: 'min(56rem, 64rem)',\n                branding: false,\n                image_caption: false,\n                forced_root_block: 'p',\n                save_onsavecallback: saveNote,\n            }}\n            onChange={handleEditorChange} />);\n\n    return (\n        <div {...editorStyle}>\n            {getStoredToken() ? editor : null}\n        </div>\n    );\n};\n\nexport default Pad;","import { AppDispatch } from \"../store\";\n\nconst baseLoginType = 'userFormViews/loginForm';\nconst baseSignupType = 'userFormViews/signupForm';\n\nconst reducer = (state = \n    {loginForm: false, \n        loginSpinner: false,\n        signupForm: false,\n        signupSpinner: false}, \n    { type }: { type: string }) => {\n    switch(type) {\n        case `${baseLoginType}/toggle`: {\n            return {...state, signupForm: false, loginForm: !state.loginForm};\n        }\n        case `${baseLoginType}/show`: {\n            return {...state, signupForm: false, loginForm: true};\n        }\n        case `${baseLoginType}/hide`: {\n            return {...state, loginForm: false};\n        }\n        case `${baseLoginType}/spinner/show`: {\n            return {...state, loginSpinner: true};\n        }\n        case `${baseLoginType}/spinner/hide`: {\n            return {...state, loginSpinner: false};\n        }\n        case `${baseSignupType}/toggle`: {\n            return {...state, loginForm: false, signupForm: !state.signupForm};\n        }\n        case `${baseSignupType}/show`: {\n            return {...state, loginForm: false, signupForm: true};\n        }\n        case `${baseSignupType}/hide`: {\n            return {...state, signupForm: false};\n        }\n        case `${baseSignupType}/spinner/show`: {\n            return {...state, signupSpinner: true};\n        }\n        case `${baseSignupType}/spinner/hide`: {\n            return {...state, signupSpinner: false};\n        }\n        default: return {...state};\n    }\n};\n\n\nexport const toggleLoginForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseLoginType}/toggle`\n    });\n};\n\nexport const showLoginForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseLoginType}/show`\n    });\n};\n\nexport const hideLoginForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseLoginType}/hide`\n    });\n};\n\nexport const showLoginSpinner = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseLoginType}/spinner/show`\n    });\n};\n\nexport const hideLoginSpinner = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseLoginType}/spinner/hide`\n    });\n};\n\nexport const toggleSignupForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseSignupType}/toggle`\n    });\n};\n\nexport const showSignupForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseSignupType}/show`\n    });\n};\n\nexport const hideSignupForm = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseSignupType}/hide`\n    });\n};\n\nexport const showSignupSpinner = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseSignupType}/spinner/show`\n    });\n};\n\nexport const hideSignupSpinner = () => (dispatch: AppDispatch) => {\n    dispatch({\n        type: `${baseSignupType}/spinner/hide`\n    });\n};\n\nexport default reducer;","import { DEFAULT_TOAST_DURATION as DEFAULT_DURATION } from \"../../constants\";\n\nexport const loginToasts = (() => {\n    const failed = {\n        description: 'Login failed. Please try again',\n        status: 'error' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true\n    };\n\n    const success = (name: string) => {\n        return {\n            description: `logged in as ${name}`,\n            status: 'success' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true,\n        };\n    };\n\n    const error = (message: string) => {\n        return {\n            description: `${message}`,\n            status: 'error' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true,\n        };\n    };\n\n    return {\n        failed,\n        success,\n        error\n    };\n})();\n\nexport const logoutToasts = (() => {\n    const success = (name: string) => {\n        return {\n            description: `${name} logged out`,\n            status: 'success' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true,\n        };\n    };\n\n    const failed = (message: string) => {\n        return {\n            description: `Error logging out: ${message}`,\n            status: 'error' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true,\n        };\n    };\n\n    return {\n        success,\n        failed,\n    };\n})();","import React from 'react';\nimport { useField, useTimeout } from '../../utils/hooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { login } from '../../state/reducers/login';\nimport { RootState } from '../../state/store';\nimport { hideLoginSpinner, showLoginSpinner, toggleLoginForm } from '../../state/reducers/userFormViews';\nimport { LoginFormViewFields, TimeoutObject, TokenData } from '../../types';\nimport { isTokenData } from '../../validators/loginValidators';\n\nimport { loginToasts as toasts } from '../../utils/toasts/login';\nimport { initializeNotes } from '../../state/reducers/notes';\n\nimport {\n    Box,\n    Button, \n    FormControl, \n    Input, \n    Spinner, \n    useToast, \n    InputGroup,\n    InputLeftElement,\n    chakra,\n    Stack,\n} from '@chakra-ui/react';\n\nimport { FaUserAlt, FaLock } from 'react-icons/fa';\n\nconst LoginFormView = ({ handleLogin, username, password, showSpinner }: LoginFormViewFields) => {\n    const styles = (() => {\n        const input = {\n            \"size\": \"sm\",\n            \"w\": 200,\n            \"variant\": \"filled\",\n            \"borderRadius\": \"xl\",    \n        };\n        const button = {\n            \"size\": \"xs\",\n            \"bgColor\": \"blue.300\",\n            \"display\": \"inline\",\n            \"title\": \"login\",\n            \"type\": \"submit\" as const,\n        };\n\n        return {\n            input, \n            button,\n        };\n    })();\n\n    const CFaUserAlt = chakra(FaUserAlt);\n    const CFaLock = chakra(FaLock);\n\n    return (\n        <FormControl as=\"form\" onSubmit={handleLogin}>\n            <Stack spacing={0.5}>\n                <InputGroup {...styles.input}>\n                    <InputLeftElement\n                        pointerEvents='none'\n                        children={<CFaUserAlt />} />\n                    <Input {...username} {...styles.input} placeholder='username' /> <br />\n                </InputGroup>\n                <InputGroup {...styles.input}>\n                    <InputLeftElement\n                        pointerEvents='none'\n                        children={<CFaLock />} />\n                    <Input {...password} {...styles.input} placeholder='password' />\n                </InputGroup>\n                <Box>\n                    <Button {...styles.button}>login</Button>\n                    <SpinnerView isVisible={showSpinner}/>\n                </Box>\n            </Stack>\n        </FormControl>\n    );\n};\n\nconst SpinnerView = ({isVisible}: {isVisible: boolean}) => {\n    const spinnerStyle = {\n        \"size\": \"sm\",\n        \"verticalAlign\": \"middle\",\n        \"margin\": \"7px\"\n    };\n\n    return (\n        isVisible \n            ? <Spinner {...spinnerStyle} />\n            : null\n    );\n};\n\nconst LoginForm = () => {\n    const dispatch = useDispatch();\n    const toast = useToast();\n\n    const formVisible = useSelector((state: RootState) => state.userFormViews.loginForm);\n    const spinnerVisible = useSelector((state: RootState) => state.userFormViews.loginSpinner);\n\n    const username = useField('text');\n    const password = useField('password');\n\n    const clearInputFields = () => {\n        username.clearField();\n        password.clearField();\n    };\n\n    const clearToastsAndSpinner = (timeout: TimeoutObject) => {\n        timeout.clear();\n        dispatch(hideLoginSpinner());\n    };\n\n    const notifyIfTimedOut = (timeout: TimeoutObject) => {\n        const handleFailure = () => {\n            toast(toasts.failed);\n            dispatch(hideLoginSpinner());\n        };\n\n        timeout.set(handleFailure, 5000);\n    };\n\n    const handleLogin = (e: React.FormEvent) => {\n        console.log(`handleLogin called`);\n        e.preventDefault();\n        const timeout = useTimeout();\n\n        new Promise((resolve) => {\n            dispatch(showLoginSpinner());\n            notifyIfTimedOut(timeout);\n\n            const token = dispatch(login({\n                username: username.value,\n                password: password.value\n            })) as unknown as TokenData;\n            \n            resolve(token);\n        })\n        .then((token) => {\n            if (isTokenData(token)) {\n                clearToastsAndSpinner(timeout);\n                dispatch(initializeNotes());\n                toast(toasts.success(token.name));\n                clearInputFields();\n                dispatch(toggleLoginForm());\n            }\n        })\n        .catch((e) => {\n            clearToastsAndSpinner(timeout);\n            toast(toasts.error(e.message));\n        });\n    };\n\n    return (\n        <>\n            {formVisible\n                ? <LoginFormView \n                    handleLogin={handleLogin} \n                    username={username} \n                    password={password} \n                    showSpinner={spinnerVisible}/>\n                : null}\n        </>\n    );\n};\n\nexport default LoginForm;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { showLoginForm } from '../../state/reducers/userFormViews';\nimport { getStoredToken, logout } from '../../state/reducers/login';\nimport { RootState } from '../../state/store';\nimport { SubmitHandler } from '../../types';\n\nimport { Button, useToast } from '@chakra-ui/react';\nimport { logoutToasts as toasts } from '../../utils/toasts/login';\nimport { clearNotes } from '../../state/reducers/notes';\n\nconst LogoutButtonView = ({ handleSubmit }: SubmitHandler) => {\n    const buttonStyle = {\n        \"size\": \"xs\",\n        \"fontSize\": \"12px\",\n        \"borderRadius\": \"6px\",\n        \"color\": \"black\",\n        \"bg\": \"red.500\",\n        \"_hover\": { \n            bg: \"red.800\",\n            color: \"white\"\n        },\n    };\n\n    return <Button onClick={handleSubmit} {...buttonStyle}>logout</Button>;\n};\n\nconst LogoutButton = () => {\n    const dispatch = useDispatch();\n    const toast = useToast();\n    const token = useSelector((state: RootState) => state.login);\n\n    const notifyLogout = (name: string | undefined) => {\n        if (name) toast(toasts.success(name));\n    };\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        try {\n            const name = getStoredToken()?.name;\n            dispatch(logout());\n            dispatch(showLoginForm());\n            notifyLogout(name);\n            dispatch(clearNotes());\n        } catch(e) {\n            toast(toasts.failed((e as Error).message));\n        }\n    };\n\n    return (\n        Object.keys(token).length === 0\n            ? null\n            : <LogoutButtonView handleSubmit={handleSubmit} />\n    );\n};\n\nexport default LogoutButton;","import { Button } from '@chakra-ui/react';\nimport React from 'react';\n\ninterface VisibilityToggler {\n    toggleVisibility: () => void \n}\nconst LoginButton = ({ toggleVisibility }: VisibilityToggler) => {\n\n    const handleToggle = (e: React.FormEvent) => {\n        e.preventDefault();\n        toggleVisibility();\n    };\n\n    const buttonStyle = {\n        \"size\": \"xs\",\n        \"bgColor\": \"blue.300\"\n    };\n\n    return (\n        <Button {...buttonStyle} onClick={handleToggle}>login</Button>\n    );\n};\n\nexport default LoginButton;","import { Button } from '@chakra-ui/react';\n\ninterface VisibilityToggler {\n    toggleVisibility: () => void \n}\nconst SignupButton = ({ toggleVisibility }: VisibilityToggler) => {\n    const handleToggle = (e: React.FormEvent) => {\n        e.preventDefault();\n        toggleVisibility();\n    };\n\n    const buttonStyle = {\n        \"size\": \"xs\",\n        \"bgColor\": \"green.300\"\n    };\n\n    return (\n        <Button {...buttonStyle} onClick={handleToggle}>sign up</Button>\n    );\n};\n\nexport default SignupButton;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../state/store';\nimport { isTokenData } from '../validators/loginValidators';\nimport { toggleLoginForm, toggleSignupForm } from '../state/reducers/userFormViews';\n\nimport LogoutButton from './login/LogoutButton';\nimport LoginButton from './login/LoginButton';\nimport SignupButton from './signup/SignupButton';\n\nconst NameView = ({ name }: { name: string }) => {\n    const spacing = {\n        'display': 'inline',\n        'marginLeft': '5px',\n        'fontFamily': '\"Lato\", sans-serif'\n    };\n\n    return (\n        <p style={spacing}>logged in as {name}</p>\n    );\n};\n\nconst UserBar = () => {\n    const token = useSelector((state: RootState) => state.login);\n    const dispatch = useDispatch();\n\n    const toggleLogin = () => {\n        dispatch(toggleLoginForm());\n    };\n\n    const toggleSignup = () => {\n        dispatch(toggleSignupForm());\n    };\n\n    const inline = {\n        'display': 'inline',\n        'fontSize': '0.9em',\n        'fontStyle': 'italic',\n        'wordSpacing': '-0.1em',\n    };\n\n    if (isTokenData(token)) {\n        return (\n            <div style={inline}>\n                <LogoutButton />\n                <NameView name={token.name} />\n            </div>\n        );\n    } else {\n        return (\n            <div style={inline}>\n                <LoginButton toggleVisibility={toggleLogin} />\n                <SignupButton toggleVisibility={toggleSignup} />\n            </div>\n        );\n    }\n};\n\nexport default UserBar;","import React from 'react';\nimport { \n    chakra,\n    ListIcon\n} from '@chakra-ui/react';\n\nimport { MdCheckCircle } from 'react-icons/md';\nimport { ImCross } from 'react-icons/im';\n\nexport const CheckCircle = chakra(MdCheckCircle);\nexport const Cross = chakra(ImCross);\n\nexport const tooltipStyle = {\n    'padding': '0',\n    'marginLeft': '0',\n    'fontSize': '14',\n    'fontFamily': '\"Lato\",  sans serif',\n};\n\nexport const headingStyle = {\n    'fontWeight': 'bold'\n};\n\nexport const listStyle = {\n    'listStyleType': 'none'\n};\n\nexport const ValidIndicator = <ListIcon as={CheckCircle} color=\"green.500\" />;\nexport const InvalidIndicator = <ListIcon as={Cross} color=\"red.500\" />;","import { ParsedSignupData, SignupData } from \"../types\";\nimport { isString } from \"./parsers\";\n\nimport {\n    MIN_PASSWORD_LENGTH,\n    MIN_NAME_LENGTH,\n    MIN_USERNAME_LENGTH,\n\n    USERNAME_ERROR as usernameErr,\n    NAME_ERROR as nameErr,\n    PASSWORD_ERROR as passwordErr,\n    VERIFY_ERROR as verifyErr,\n} from '../constants';\n\nexport const isValidPassword = (pass: string) => {\n    return hasAtLeastOneLetter(pass)\n        && hasAtLeastOneNumber(pass) \n        && hasAtLeastXCharacters(pass, MIN_PASSWORD_LENGTH);\n};\n\nexport const hasAtLeastOneLetter = (value: string) => {\n    return /[a-zA-Z]/.test(value);\n};\n\nexport const hasAtLeastOneNumber = (value: string) => {\n    return /\\d/.test(value);\n};\n\nexport const hasAtLeastXCharacters = (value: string, x: number) => {\n    return value.length >= x;\n};\n\n\nexport const parseSignupData = (value: unknown): ParsedSignupData => {\n    if (!value) {\n        console.error(`argument to parseSignupData is falsey`);\n        throw new Error(`Unexpected error. Please refresh the page`);\n    }\n\n    const data = value as SignupData;\n    \n    if (!('firstName' in data) || !isValidLength(data.firstName, MIN_NAME_LENGTH)) \n        throw new Error(nameErr);\n    else if (!('lastName' in data) || !isValidLength(data.lastName, MIN_NAME_LENGTH)) \n        throw new Error(nameErr);\n    else if (!('username' in data) || !isValidLength(data.username, MIN_USERNAME_LENGTH)) \n        throw new Error(usernameErr);\n    else if (!('password' in data) || !isValidPassword(data.password)) \n        throw new Error(passwordErr);\n    else if (!('verify' in data) || data.verify !== data.password)\n        throw new Error(verifyErr);\n    else return {\n        username: data.username,\n        name: data.firstName + ' ' + data.lastName,\n        password: data.password\n    };\n};\n\nconst isValidLength = (value: unknown, minLength: number) => {\n    return isString(value) && hasAtLeastXCharacters(value, minLength);\n};","import React, { useState, useEffect } from 'react';\nimport {\n    UnorderedList,\n    ListItem,\n    Box\n} from '@chakra-ui/react';\nimport { \n    tooltipStyle,\n    headingStyle,\n    listStyle,\n    ValidIndicator,\n    InvalidIndicator,\n} from './styling';\n\nimport { \n    hasAtLeastOneLetter,\n    hasAtLeastOneNumber,\n    hasAtLeastXCharacters,\n} from '../../../validators/userValidators';\n\nimport { MIN_PASSWORD_LENGTH } from '../../../constants';\n\ninterface TooltipsViewFields {\n    letterIsValid: boolean,\n    numberIsValid: boolean,\n    characterIsValid: boolean,\n}\n\nconst PasswordTooltipsView = \n    ({ letterIsValid, numberIsValid, characterIsValid }: TooltipsViewFields) => {\n    return (\n        <Box {...tooltipStyle}>\n            <Box as='span' {...headingStyle}>Password</Box>\n            <UnorderedList {...listStyle}>\n                <ListItem>\n                    {letterIsValid\n                        ? ValidIndicator\n                        : InvalidIndicator}\n                    1 letter minimum\n                </ListItem>\n                <ListItem>\n                    {numberIsValid\n                        ? ValidIndicator\n                        : InvalidIndicator}\n                    1 number minimum\n                </ListItem>\n                <ListItem>\n                    {characterIsValid\n                        ? ValidIndicator\n                        : InvalidIndicator}\n                    8 characters minimum\n                </ListItem>\n            </UnorderedList>\n        </Box>\n    );\n};\n\ninterface TooltipsFields {\n    password: string,\n}\n\nconst PasswordTooltips = ({ password }: TooltipsFields) => {\n    const [characterIsValid, setCharacterValidity] = useState(false);\n    const [numberIsValid, setNumberValidity] = useState(false);\n    const [letterIsValid, setLetterValidity] = useState(false);\n\n    useEffect(() => {\n        setCharacterValidity(\n            hasAtLeastXCharacters(password, MIN_PASSWORD_LENGTH));\n        setNumberValidity(\n            hasAtLeastOneNumber(password));\n        setLetterValidity(\n            hasAtLeastOneLetter(password));\n    }, [password]);\n\n    return (\n        <PasswordTooltipsView\n            letterIsValid={letterIsValid}\n            numberIsValid={numberIsValid}\n            characterIsValid={characterIsValid}/>\n    );\n};\n\nexport default PasswordTooltips;","import React, { useEffect, useState } from 'react';\nimport { \n    UnorderedList,\n    Box,\n    ListItem\n} from '@chakra-ui/react';\nimport {\n    tooltipStyle,\n    headingStyle,\n    listStyle,\n    ValidIndicator,\n    InvalidIndicator\n} from './styling';\n\nimport { MIN_USERNAME_LENGTH } from '../../../constants';\nimport { hasAtLeastXCharacters } from '../../../validators/userValidators';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../state/store';\n\ninterface UsernameTooltipsFields {\n    characterIsValid: boolean,\n    usernameAvailable: boolean,\n}\nconst UsernameTooltipsView = ({ characterIsValid, usernameAvailable }: UsernameTooltipsFields) => {\n    return (\n        <Box {...tooltipStyle}>\n            <Box as='span' {...headingStyle}>Username</Box>\n            <UnorderedList {...listStyle}>\n                <ListItem>\n                    {characterIsValid\n                        ? ValidIndicator\n                        : InvalidIndicator}\n                    6 characters minimum\n                </ListItem>\n                <ListItem>\n                    {usernameAvailable\n                        ? ValidIndicator\n                        : InvalidIndicator}\n                    checked\n                </ListItem>\n            </UnorderedList>\n        </Box>\n    );\n};\n\ninterface TooltipFields {\n    username: string,\n}\nconst UsernameTooltips = ({ username }: TooltipFields) => {\n    const [characterIsValid, setCharacterIsValid] = useState(false);\n    const [usernameAvailable, setUsernameAvailable] = useState(false);\n\n    const availableUsernames = useSelector((state: RootState) => state.signup);\n\n    useEffect(() => {\n        setCharacterIsValid(\n            hasAtLeastXCharacters(username, MIN_USERNAME_LENGTH)\n        );\n\n        setUsernameAvailable(\n            availableUsernames.includes(username.toLowerCase())\n        );\n    }, [username, availableUsernames]);\n\n    return (\n        <UsernameTooltipsView \n            characterIsValid={characterIsValid}\n            usernameAvailable={usernameAvailable}/>\n    );\n};\n\nexport default UsernameTooltips;","import { Box } from '@chakra-ui/react';\nimport React from 'react';\nimport PasswordTooltips from './Password';\nimport UsernameTooltips from './Username';\n\ninterface Props {\n    password: string,\n    username: string,\n    gridArea: string\n}\nconst Tooltips = ({ password, username, gridArea }: Props) => {\n    return (\n        <Box gridArea={gridArea}>\n            <UsernameTooltips username={username}/>\n            <PasswordTooltips password={password} />\n        </Box>\n    );\n};\n\nexport default Tooltips;","import axios, { AxiosError } from 'axios';\nimport { ParsedSignupData } from '../types';\nimport { isTokenData } from '../validators/loginValidators';\n\nconst baseUrl = '/api/users';\n\nconst signup = async (user: ParsedSignupData) => {\n    try {\n        const { data } = await axios.post<unknown>(baseUrl, user);\n        if (!isTokenData(data)) throw new Error(`Failed to create account. Please try again`);\n        return data;\n    } catch(e) {\n        throw new Error((e as AxiosError).response?.data);\n    }\n};\n\nconst checkUsernameAvailable = async (username: string) => {\n    try {\n        const { data: isAvailable } = await axios.get<boolean>(`${baseUrl}/${username}`);\n        return isAvailable;    \n    } catch(e) {\n        throw new Error(`Username available checking error with backend: ${(e as AxiosError).response?.data.error}`);\n    }\n};\n\nexport default {\n    signup,\n    checkUsernameAvailable\n};","import { ActionPayload, SignupData } from \"../../types\";\nimport { AppDispatch, AppGetState } from \"../store\";\nimport signupService from \"../../services/signupService\";\nimport { parseSignupData } from \"../../validators/userValidators\";\nimport { isStringAndExists } from \"../../validators/parsers\";\n\nconst reducer = (state = ([] as string[]), { type, payload }: ActionPayload) => {\n    switch(type) {\n        case 'signup/username/save': {\n            if (isStringAndExists(payload)) {\n                return [\n                    ...state,\n                    payload\n                ];\n            } else return [...state];\n        }\n        default: return [...state];\n    }\n};\n\nexport const signup = (signupInfo: SignupData) => async (dispatch: AppDispatch) => {\n    const parsed = parseSignupData(signupInfo);\n    const token = await signupService.signup(parsed);\n\n    dispatch({\n        type: 'login/storeToken',\n        payload: token\n    });\n\n    dispatch({\n        type: 'login/init',\n        payload: token\n    });\n    return token;\n};\n\nexport const saveUsername = (username: string) => (dispatch: AppDispatch) => {\n    dispatch({\n        type: 'signup/username/save',\n        payload: username.toLowerCase()\n    });\n};\n\nconst checkDatabaseForAvailability = async (username: string) => {\n    const isAvailable = await signupService.checkUsernameAvailable(username);\n    return isAvailable;\n};\n\nexport const checkAvailability = (username: string) => \nasync (dispatch: AppDispatch, getState: AppGetState) => {\n    const lowercase = username.toLowerCase();\n    const availableUsernames = getState().signup;\n    \n    if (availableUsernames && availableUsernames.includes(lowercase)) {\n        return true;\n    } \n    else {\n        const isAvailable = await checkDatabaseForAvailability(lowercase);\n        if (isAvailable) {\n            dispatch({\n                type: 'signup/username/save',\n                payload: username\n            });\n            return true;\n        } \n        else return false;\n    }\n};\n\nexport default reducer;","import { DEFAULT_TOAST_DURATION as DEFAULT_DURATION } from \"../../constants\";\nconst signupToasts = (() => {\n    const failed = (message: string) => {\n        return {\n            description: message,\n            status: 'error' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true\n        };\n    };\n\n    const available = (username: string) => {\n        return {\n            description: `username ${username} is available`,\n            status: 'success' as const,\n            duration: DEFAULT_DURATION,\n            isClosable: true\n        };\n    };\n\n    const success = {\n        description: `Account successfully created`,\n        status: 'success' as const,\n        duration: DEFAULT_DURATION,\n        isClosable: true,\n    };\n\n    return {\n        failed,\n        success,\n        available\n    };\n})();\n\nexport default signupToasts;","import { useDispatch } from \"react-redux\";\nimport { useToast } from \"@chakra-ui/react\";\nimport { MIN_USERNAME_LENGTH, USERNAME_ERROR } from \"../../constants\";\nimport toasts from '../../utils/toasts/signup';\nimport { checkAvailability } from \"../../state/reducers/signup\";\nimport { Button } from \"@chakra-ui/react\";\n\nconst UsernameAvailableButton = ({ username }: { username: string }) => {\n    const dispatch = useDispatch();\n    const toast = useToast();\n\n    const buttonStyle = {\n        \"fontSize\": \"12px\",\n        \"height\": \"24px\",\n        \"alignSelf\": \"center\",\n        \"color\": \"white\",\n        \"width\": \"min-content\",\n        \"marginLeft\": \"6px\",\n        \"backgroundColor\": \"red.700\",\n        \"_hover\": {\n            bg: \"red.500\",\n            cursor: \"pointer\"\n        },\n        \"_focus\": {\n            bg: \"blue\"\n        }\n    };\n\n\n    const handleCheckAvailability = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        const lowercase = username.toLowerCase();\n        new Promise((resolve) => {\n            if (username.length < MIN_USERNAME_LENGTH) throw new Error(USERNAME_ERROR);\n            const isAvailable = dispatch(checkAvailability(lowercase));\n            resolve(isAvailable);\n        })\n        .then((isAvailable) => {\n            if (typeof isAvailable === 'boolean') {\n                if (isAvailable) toast(toasts.available(username));\n                else toast(toasts.failed(`username ${username} is already taken`));\n            }\n        })\n        .catch(error => {\n            toast(toasts.failed(error.message));\n            console.log(`failed checking availability: ${error.message}`);\n        });\n    };\n\n    return (\n        <Button\n            {...buttonStyle} \n            as=\"div\" \n            onClick={handleCheckAvailability}>check</Button>\n    );\n};\n\nexport default UsernameAvailableButton;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from '../../state/store';\nimport {\n    FormControl,\n    InputLeftElement,\n    InputGroup,\n    Input,\n    chakra,\n    Grid,\n    Button,\n    useToast\n} from '@chakra-ui/react';\nimport { FaUserAlt, FaLock, FaAddressCard } from 'react-icons/fa';\n\nimport { useField } from '../../utils/hooks';\nimport { SignupFormViewFields } from '../../types';\nimport Tooltips from './tooltips/Tooltips';\n\nimport { \n    MAX_NAME_LENGTH, \n    MAX_USERNAME_LENGTH, \n    MAX_PASSWORD_LENGTH} from '../../constants';\nimport { signup } from \"../../state/reducers/signup\";\nimport signupToasts from '../../utils/toasts/signup';\nimport { loginToasts } from '../../utils/toasts/login';\nimport { isTokenData } from '../../validators/loginValidators';\nimport { hideSignupForm, hideSignupSpinner, showSignupSpinner } from '../../state/reducers/userFormViews';\nimport UsernameAvailableButton from './CheckUsernameButton';\n\nconst CFaUserAlt = chakra(FaUserAlt);\nconst CFaLock = chakra(FaLock);\nconst CFaAddressCard = chakra(FaAddressCard);\n\nconst SignupFormView = \n    ({ firstName, lastName, username, password, verify, spinnerVisible, handleSignup }: SignupFormViewFields) => {\n\n    const inputStyle = {\n        \"size\": \"sm\",\n        \"w\": \"100%\",\n        \"variant\": \"filled\"\n    };\n\n    const containerStyle = {\n        'templateColumns': '1fr 1fr',\n        'templateAreas':\n            `'firstName lastName'\n            'username username'\n            'password verify'\n            'tooltips submit'`,\n        'width': 400,\n        'columnGap': '5px',\n        'rowGap': '7px',\n    };\n\n    const buttonStyle = {\n        \"size\": \"xs\",\n        \"textColor\": \"white\",\n        \"bgColor\": \"blue.700\",\n        \"width\": \"min-content\",\n        \"_hover\": {bg: \"blue.400\"},\n        \"justifySelf\": \"right\",\n        \"marginRight\": \"10px\",\n        \"display\": \"inline\",\n        \"type\": \"submit\" as const\n    };\n\n    const SubmitButton = spinnerVisible\n            ? <Button {...buttonStyle} gridArea='submit' isLoading onSubmit={handleSignup}>sign up</Button>\n            : <Button {...buttonStyle} gridArea='submit' onSubmit={handleSignup}>sign up</Button>;\n\n    return (\n        <FormControl as=\"form\" onSubmit={handleSignup}>\n            <Grid {...containerStyle}>\n                <InputGroup {...inputStyle} gridArea='firstName'>\n                    <InputLeftElement\n                        pointerEvents='none'\n                        children={<CFaAddressCard />} />\n                    <Input\n                        {...firstName}\n                        {...inputStyle}\n                        maxlength={MAX_NAME_LENGTH} \n                        placeholder='first name'/>\n                </InputGroup>\n                <InputGroup {...inputStyle} gridArea='lastName'>\n                    <Input\n                        {...lastName} \n                        {...inputStyle} \n                        maxlength={MAX_NAME_LENGTH} \n                        placeholder='last name'/>\n                </InputGroup>\n                <InputGroup {...inputStyle} gridArea='username'>\n                    <InputLeftElement\n                        pointerEvents='none'\n                        children={<CFaUserAlt />} />\n                    <Input \n                        {...username} \n                        {...inputStyle} \n                        maxlength={MAX_USERNAME_LENGTH} \n                        placeholder='username'/>\n                    <UsernameAvailableButton username={username.value} />\n                </InputGroup>\n                <InputGroup {...inputStyle} gridArea='password'>\n                    <InputLeftElement\n                        pointerEvents='none'\n                        children={<CFaLock />} />\n                    <Input\n                        {...password}\n                        {...inputStyle}\n                        maxlength={MAX_PASSWORD_LENGTH}\n                        placeholder='password'/>\n                </InputGroup>\n                <InputGroup {...inputStyle} gridArea='verify'>\n                    <Input {...verify} {...inputStyle} placeholder='verify'/>\n                </InputGroup>\n                <Tooltips username={username.value} password={password.value} gridArea='tooltips'/>\n                {SubmitButton}\n            </Grid>\n        </FormControl>\n    );\n};\n\nconst SignupForm = () => {\n    const formVisible = useSelector((state: RootState) => state.userFormViews.signupForm);\n    const spinnerVisible = useSelector((state: RootState) => state.userFormViews.signupSpinner);\n    const dispatch = useDispatch();\n    const toast = useToast();\n\n    const username = useField('text');\n    const firstName = useField('text');\n    const lastName = useField('text');\n    const password = useField('password');\n    const verify = useField('password');\n\n    const handleSignup = (e: React.FormEvent) => {\n        e.preventDefault();\n    \n        new Promise((resolve) => {\n            dispatch(showSignupSpinner());\n\n            const tokenData = dispatch(signup({\n                username: username.value,\n                firstName: firstName.value,\n                lastName: lastName.value,\n                password: password.value,\n                verify: verify.value,\n            }));\n            resolve(tokenData);\n        })\n        .then(tokenData => {\n            if (isTokenData(tokenData)) {\n                toast(loginToasts.success(tokenData.name));\n                username.clearField();\n                firstName.clearField();\n                lastName.clearField();\n                password.clearField();\n                verify.clearField();\n                dispatch(hideSignupForm());\n            }\n        })\n        .catch((error) => {\n            console.error(`Failed to create user: ${error.message}`);\n            toast(signupToasts.failed(`Failed to create user`));\n        })\n        .finally(() => {\n            dispatch(hideSignupSpinner());\n        });\n    };\n\n    return (\n        formVisible \n            ? <SignupFormView \n                username={username} \n                firstName={firstName} \n                lastName={lastName}\n                password={password}\n                verify={verify}\n                handleSignup={handleSignup}\n                spinnerVisible={spinnerVisible} />\n            : null\n    );\n};\n\nexport default SignupForm;","import React, { useEffect } from 'react';\nimport {\n    BrowserRouter as Router,\n    Route,\n    Switch\n} from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { Box, ChakraProvider, useToast } from '@chakra-ui/react';\nimport { noteToasts } from './utils/toasts/notes';\n\nimport { initializeNotes } from './state/reducers/notes';\nimport { saveTokenToState } from './state/reducers/login';\n\nimport NavBar from './components/NavBar';\nimport Home from './components/Home';\nimport NotesList from './components/notes/NotesList';\nimport NoteForm from './components/notes/NoteForm';\nimport Pad from './components/pad/Pad';\nimport LoginForm from './components/login/LoginForm';\nimport UserBar from './components/UserBar';\nimport SignupForm from './components/signup/SignupForm';\n\nfunction App() {\n    const dispatch = useDispatch();\n    const toast = useToast();\n\n    useEffect(() => {\n        try {\n            dispatch(initializeNotes());\n            dispatch(saveTokenToState());\n        } catch(e) {\n            console.error(`Network error during notes initialization`);\n            toast(noteToasts.failedGet);\n        }\n    }, [dispatch]);\n\n    return (\n        <ChakraProvider>\n            <Router>\n                <Box>\n                    <NavBar />\n                    <UserBar />\n                    <Switch>\n                        <Route path='/notes'>\n                            <NotesList />\n                            <NoteForm />\n                        </Route>\n                        <Route path='/pad'>\n                            <Pad />\n                        </Route>\n                        <Route path='/'>\n                            <Home />\n                        </Route>\n                    </Switch> <br />\n                    <LoginForm />\n                    <SignupForm />\n                </Box>\n            </Router>\n        </ChakraProvider>\n    );\n}\n\nexport default App;","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport notesReducer from './reducers/notes';\nimport loginReducer from './reducers/login';\nimport signupReducer from './reducers/signup';\nimport userFormViews from './reducers/userFormViews';\nimport noteActionViews from './reducers/noteActionViews';\n\nimport thunk from 'redux-thunk';\n\nconst root = combineReducers({\n    notes: notesReducer,\n    login: loginReducer,\n    signup: signupReducer,\n    userFormViews: userFormViews,\n    noteActionViews: noteActionViews,\n});\n\nconst store = createStore(\n    root,\n    applyMiddleware(thunk)\n);\n\nexport default store;\n\nexport type AppDispatch = typeof store.dispatch;\nexport type AppGetState = typeof store.getState;\n\n//To use as type for useSelector's state parameter\nexport type RootState = ReturnType<typeof store.getState>;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './state/store';\nimport './index.css';\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}